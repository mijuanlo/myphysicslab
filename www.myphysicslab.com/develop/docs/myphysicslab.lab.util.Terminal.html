<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>myphysicslab.lab.util.Terminal</title><link href="dossier.css" rel="stylesheet" type="text/css"><script src="types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,[[[&quot;myphysicslab.lab.util.Terminal&quot;,null,null,null,[null,397,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],null,[[[null,&quot;&lt;p&gt;Executes scripts and provides a command line user interface with separate text\nfields for input and output. Executes EasyScript or JavaScript. The JavaScript is a\nsafe subset to prevent malicious scripts. Allows use of &amp;#34;short names&amp;#34; to replace full\nnamespace pathnames of classes.&lt;/p&gt;\n&lt;p&gt;After the script is executed the result is converted to text and displayed in the\noutput text field. The output is not displayed if the result is &lt;code&gt;undefined&lt;/code&gt; or the\nscript ends with a semicolon.&lt;/p&gt;\n&lt;p&gt;See also &lt;a href=\&quot;Customizing.html\&quot;&gt;Customizing myPhysicsLab Software&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;Getting Help&lt;/h2&gt;\n&lt;p&gt;Type &lt;code&gt;help&lt;/code&gt; in the Terminal input text area and press return to see the help message.\nSeveral useful Terminal commands are shown. The help message also specifies whether the\ncode was &lt;em&gt;simple-compiled&lt;/em&gt; or &lt;em&gt;advanced-compiled&lt;/em&gt;.&lt;/p&gt;\n&lt;p&gt;Perhaps the most useful command is &lt;code&gt;vars&lt;/code&gt; which shows the list of variables that are\navailable.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;twotypesofscripts\&quot;&gt;&lt;/a&gt;\nTwo Types of Scripts&lt;/h2&gt;\n&lt;p&gt;Terminal can execute two types of scripts:&lt;/p&gt;\n&lt;ol&gt;&lt;li&gt;\n&lt;p&gt;JavaScript: a safe subset of JavaScript, where you can use short-names that are\nrun thru &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#expand\&quot;&gt;&lt;code&gt;#expand&lt;/code&gt;&lt;/a&gt;. JavaScript is only available when the application\nhas been\n&lt;a href=\&quot;https://www.myphysicslab.com/develop/docs/Building.html#advancedvs.simplecompile\&quot;&gt;simple-compiled&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;EasyScript: a very simple scripting language for setting Parameter values.\nSee &lt;code&gt;myphysicslab.lab.util.EasyScriptParser&lt;/code&gt; for syntax details.\nWorks with either simple or advanced-compile&lt;/p&gt;\n&lt;/li&gt;&lt;/ol&gt;\n&lt;p&gt;These two types of script can be intermixed in a single script as long as they are\nseparated by a semicolon. For example, here are both types of scripts in\none script which could be entered in\n&lt;a href=\&quot;https://www.myphysicslab.com/develop/build/sims/pendulum/PendulumApp-en.html?SHOW_TERMINAL&amp;#61;true\&quot;&gt;simple-compiled PendulumApp&lt;/a&gt;.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;DAMPING&amp;#61;0.1; GRAVITY&amp;#61;9.8; ANGLE&amp;#61;2.5; bob.setFillStyle(&amp;#39;red&amp;#39;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The first three commands are EasyScript commands that set Parameter values; the last is\na JavaScript command.&lt;/p&gt;\n&lt;p&gt;In most simple-compiled applications EasyScriptParser is available in the variable\n&lt;code&gt;easyScript&lt;/code&gt;, which you can use to execute EasyScript from within JavaScript. Here are\nexamples that can be entered in\n&lt;a href=\&quot;https://www.myphysicslab.com/develop/build/sims/pendulum/PendulumApp-en.html?SHOW_TERMINAL&amp;#61;true\&quot;&gt;simple-compiled PendulumApp&lt;/a&gt;.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;easyScript.parse(&amp;#39;angle&amp;#39;)\n\neasyScript.parse(&amp;#39;angle&amp;#61;&amp;#39;&amp;#43;Math.PI/2)\n\neasyScript.getParameter(&amp;#39;gravity&amp;#39;).getValue()\n\neasyScript.getParameter(&amp;#39;gravity&amp;#39;).setValue(2.5)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;&lt;a id=\&quot;safesubsetofjavascript\&quot;&gt;&lt;/a&gt;\nSafe Subset of JavaScript&lt;/h2&gt;\n&lt;p&gt;To prevent malicious scripts from being executed, only a safe subset of JavaScript is\nallowed. See the book &lt;em&gt;JavaScript: The Definitive Guide&lt;/em&gt; by Flanagan, section 11.1.2\n&amp;#39;Subsets for Security&amp;#39;. JavaScript commands are executed via the JavaScript &lt;code&gt;eval&lt;/code&gt;\nfunction under\n&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode\&quot;&gt;strict mode&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;We prohibit access to:&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;most global variables including the &lt;code&gt;window&lt;/code&gt; object which defines global variables.&lt;/li&gt;&lt;li&gt;certain methods and properties of Terminal.&lt;/li&gt;&lt;li&gt;properties and methods that access or change the structure of the HTML document.&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;We allow usage of the JavaScript &lt;code&gt;eval&lt;/code&gt; function, but it is mapped to the Terminal\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#eval\&quot;&gt;&lt;code&gt;#eval&lt;/code&gt;&lt;/a&gt; which does the vetting of the script.&lt;/p&gt;\n&lt;p&gt;Property access with square brackets is prohibited, except for accessing array elements\nwith non-negative integers. This is to prevent accessing prohibited properties by\nmanipulating strings to fool the &amp;#34;safe subset&amp;#34; checking. For example the following is\nnot allowed:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; terminal[&amp;#39;white&amp;#39;&amp;#43;&amp;#39;List_&amp;#39;]\nError: prohibited usage of square brackets in script: terminal[&amp;#39;white&amp;#39;&amp;#43;&amp;#39;List_&amp;#39;]\n&amp;gt; var idx &amp;#61; &amp;#39;whiteList_&amp;#39;\nwhiteList_\n&amp;gt; terminal[idx]\nError: prohibited usage of square brackets in script: terminal[idx]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Array access can be done only with a non-negative integer number:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; var a &amp;#61; [&amp;#34;red&amp;#34;, &amp;#34;green&amp;#34;, &amp;#34;blue&amp;#34;]\nred,green,blue\n&amp;gt; a[2]\nblue\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Array access cannot be done with a variable or expression, but you can use the built-in\nfunctions &lt;a href=\&quot;myphysicslab.lab.util.Util.html#module$exports$myphysicslab$lab$util$Util.get\&quot;&gt;&lt;code&gt;Util#get&lt;/code&gt;&lt;/a&gt; and &lt;a href=\&quot;myphysicslab.lab.util.Util.html#module$exports$myphysicslab$lab$util$Util.set\&quot;&gt;&lt;code&gt;Util#set&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; a[1&amp;#43;1]\nError: prohibited usage of square brackets in script: a[1&amp;#43;1]\n&amp;gt; Util.get(a, 1&amp;#43;1)\nblue\n&amp;gt; Util.set(a, 1&amp;#43;1, &amp;#34;orange&amp;#34;)\norange\n&amp;gt; a\nred,green,orange\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;&lt;a id=\&quot;shortnames\&quot;&gt;&lt;/a&gt;\nShort Names&lt;/h2&gt;\n&lt;p&gt;To allow for shorter scripts, we define a variety of regular expressions which\nconvert short names to their proper long expanded form.&lt;/p&gt;\n&lt;p&gt;Most class names will have their equivalent short-name defined. For example you can type&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; new DoubleRect(0,0,1,1)\nDoubleRect{left_: 0, bottom_: 0, right_: 1, top_: 1}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;instead of&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; new myphysicslab.lab.util.DoubleRect(0,0,1,1)\nDoubleRect{left_: 0, bottom_: 0, right_: 1, top_: 1}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Applications will typically make their key objects available with short-names.\nSo instead of &lt;code&gt;app.sim&lt;/code&gt; you can just type &lt;code&gt;sim&lt;/code&gt;.\nYou can see this at work by using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#setVerbose\&quot;&gt;&lt;code&gt;#setVerbose&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; terminal.setVerbose(true)\n&amp;gt; new Vector(2,3)\n&amp;gt;&amp;gt; new myphysicslab.lab.util.Vector(2,3)\nVector{x: 2, y: 3}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In verbose mode, the command is echoed a second time to show how it appears after\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#expand\&quot;&gt;&lt;code&gt;expansion&lt;/code&gt;&lt;/a&gt;. The terminal prompt symbol is doubled to distinguish\nthe expanded version.&lt;/p&gt;\n&lt;p&gt;Short-names are implemented by defining a set of regular expression replacement rules\nwhich are applied to the Terminal input string before it is executed.&lt;/p&gt;\n&lt;p&gt;Regular expression rules are registered with Terminal using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#addRegex\&quot;&gt;&lt;code&gt;#addRegex&lt;/code&gt;&lt;/a&gt;. Then\nwhenever a command is evaluated it is first expanded to the long form and vetted using\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#expand\&quot;&gt;&lt;code&gt;#expand&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#module$exports$myphysicslab$lab$util$Terminal.stdRegex\&quot;&gt;&lt;code&gt;Terminal.stdRegex&lt;/code&gt;&lt;/a&gt; defines a standard set of regular expressions for\nexpanding myPhysicsLab class names (like &lt;code&gt;DoubleRect&lt;/code&gt;) and for expanding a few function\nshortcuts like &lt;code&gt;methodsOf&lt;/code&gt;, &lt;code&gt;propertiesOf&lt;/code&gt; and &lt;code&gt;prettyPrint&lt;/code&gt;. An application can add\nmore shortcuts via &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#addRegex\&quot;&gt;&lt;code&gt;#addRegex&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;The Result Variable&lt;/h2&gt;\n&lt;p&gt;The result of the last Terminal script is stored in a variable named &lt;code&gt;result&lt;/code&gt;. Here is\nan example Terminal session:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; 2&amp;#43;2\n4\n&amp;gt; result*2\n8\n&amp;gt; result*2\n16\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#eval\&quot;&gt;&lt;code&gt;#eval&lt;/code&gt;&lt;/a&gt; has an argument called &lt;code&gt;output&lt;/code&gt; which if set to &lt;code&gt;false&lt;/code&gt;\nprevents &lt;code&gt;result&lt;/code&gt; from being updated. When &lt;code&gt;output&amp;#61;&amp;#61;false&lt;/code&gt;, then &lt;code&gt;result&lt;/code&gt; is is defined\nfor commands in the same string, but that version of &lt;code&gt;result&lt;/code&gt; is temporary and\nindependent of the permanent &lt;code&gt;result&lt;/code&gt; variable.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;thezobject\&quot;&gt;&lt;/a&gt;\nThe z Object&lt;/h2&gt;\n&lt;p&gt;&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode\&quot;&gt;Strict mode&lt;/a&gt;\nprevents adding global variables when using the JavaScript &lt;code&gt;eval&lt;/code&gt; command.\nTo allow making variables that persist between commands, Terminal provides an object\nnamed &lt;code&gt;z&lt;/code&gt; where properties can be added:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; z.a &amp;#61; 1\n1\n&amp;gt; z.a\n1\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This &lt;code&gt;z&lt;/code&gt; object is a property of Terminal; &lt;code&gt;z&lt;/code&gt; is initially an object with no\nproperties. We define a &lt;a href=\&quot;#shortnames\&quot;&gt;short name&lt;/a&gt; regular expression so that referring\nto &lt;code&gt;z&lt;/code&gt; is replaced by &lt;code&gt;terminal.z&lt;/code&gt; when the command is executed.&lt;/p&gt;\n&lt;h2&gt;Declaring a Variable&lt;/h2&gt;\n&lt;p&gt;To hide the usage of the &lt;code&gt;z&lt;/code&gt; object, Terminal interprets the &lt;code&gt;var&lt;/code&gt; keyword in a\nspecial way.&lt;/p&gt;\n&lt;p&gt;When Terminal sees the &lt;code&gt;var&lt;/code&gt; keyword at the start of a command, it changes the script\nto use the &lt;code&gt;z&lt;/code&gt; object and defines a short-name. For example the command&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; var foo &amp;#61; 3\n3\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;is translated to&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; z.foo &amp;#61; 3\n3\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;and thereafter every reference to &lt;code&gt;foo&lt;/code&gt; will be changed to &lt;code&gt;z.foo&lt;/code&gt; in later commands.\nYou can see this at work by using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#setVerbose\&quot;&gt;&lt;code&gt;#setVerbose&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; terminal.setVerbose(true)\n&amp;gt; foo\n&amp;gt;&amp;gt; app.terminal.z.foo\n3\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;The terminal Variable&lt;/h2&gt;\n&lt;p&gt;Some features require that the name &lt;code&gt;terminal&lt;/code&gt; is defined and resolves to the Terminal\nobject. These features include the &lt;code&gt;z&lt;/code&gt; variable, the &lt;code&gt;result&lt;/code&gt; variable, and the usage\nof the &lt;code&gt;var&lt;/code&gt; keyword.&lt;/p&gt;\n&lt;p&gt;In most applications this is accomplished by using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#addRegex\&quot;&gt;&lt;code&gt;#addRegex&lt;/code&gt;&lt;/a&gt; something like\nthis:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;terminal.addRegex(&amp;#39;terminal&amp;#39;, &amp;#39;app&amp;#39;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;where &lt;code&gt;app&lt;/code&gt; is the global variable containing the application. The purpose of the regex\nis to replace the word &lt;code&gt;terminal&lt;/code&gt; with &lt;code&gt;app.terminal&lt;/code&gt; which is a valid JavaScript\nreference.&lt;/p&gt;\n&lt;p&gt;(In unit tests of Terminal, we temporarily define a global variable named &lt;code&gt;terminal&lt;/code&gt;.)&lt;/p&gt;\n&lt;h2&gt;Cautions About Newline Character&lt;/h2&gt;\n&lt;p&gt;When you paste a script into the Terminal text input field, be aware that &lt;em&gt;newlines are\nreplaced by spaces&lt;/em&gt;. For a multi-line script this can cause errors. To prevent problems:&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;\n&lt;p&gt;Use explicit semicolons instead of relying on JavaScript&amp;#39;s policy about optional\nsemicolons.&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;Use slash-star style comments instead of double-slash style comments (which are\nterminated by a newline).&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;If for some reason you really need a newline in the script, use &lt;code&gt;\\u000A&lt;/code&gt; or &lt;code&gt;\\x0A&lt;/code&gt;.\nThese are replaced with the newline character before the script is evaluated.&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;Put the multi-line script in a\n&lt;a href=\&quot;Customizing.html#customizingthestart-uphtmlpage\&quot;&gt;start-up HTML page&lt;/a&gt;. You can\nthen call &lt;code&gt;Terminal.eval()&lt;/code&gt; directly on a string that you create, and that\nstring can include newline characters.&lt;/p&gt;\n&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;The tab character also cannot be input directly to the Terminal input field, because\nthe browser interprets that to mean &amp;#34;move to the next field&amp;#34;. You can use &lt;code&gt;\\u0009&lt;/code&gt; or\n&lt;code&gt;\\x09&lt;/code&gt; which are replaced by a tab character before the script is evaluated.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;urlqueryscript\&quot;&gt;&lt;/a&gt;\nURL Query Script&lt;/h2&gt;\n&lt;p&gt;A Terminal script can be embedded into a URL\n&lt;a href=\&quot;https://en.wikipedia.org/wiki/Query_string\&quot;&gt;query string&lt;/a&gt; which will be executed when\nthe page is loaded. This provides a convenient way to remember or share a customized\nsimulation with someone else.&lt;/p&gt;\n&lt;p&gt;The script follows a question mark in the URL, so it is called a &amp;#39;query script&amp;#39;\nor &amp;#39;query URL&amp;#39;. Here is an\n&lt;a href=\&quot;https://www.myphysicslab.com/pendulum/pendulum-en.html?DRIVE_AMPLITUDE&amp;#61;0;DAMPING&amp;#61;0.1;GRAVITY&amp;#61;9.8;ANGLE&amp;#61;2.5;ANGLE_VELOCITY&amp;#61;0;\&quot;&gt;example&lt;/a&gt;:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;https://www.myphysicslab.com/pendulum/pendulum-en.html?DRIVE_AMPLITUDE&amp;#61;0;\nDAMPING&amp;#61;0.1;GRAVITY&amp;#61;9.8;ANGLE&amp;#61;2.5;ANGLE_VELOCITY&amp;#61;0;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The URL Query Script is executed at startup by calling &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#parseURL\&quot;&gt;&lt;code&gt;#parseURL&lt;/code&gt;&lt;/a&gt; or\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#parseURLorRecall\&quot;&gt;&lt;code&gt;#parseURLorRecall&lt;/code&gt;&lt;/a&gt;.  Most myPhysicsLab applications do this.&lt;/p&gt;\n&lt;p&gt;Some websites will only accept user-supplied URLs that follow the strict guidelines of\n&lt;a href=\&quot;https://en.wikipedia.org/wiki/Percent-encoding\&quot;&gt;URL percent-encoding&lt;/a&gt;. Therefore\nwe must substitute in the URL:&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;&lt;code&gt;%20&lt;/code&gt; for space&lt;/li&gt;&lt;li&gt;&lt;code&gt;%22&lt;/code&gt; for &lt;code&gt;&amp;#34;&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%3C&lt;/code&gt; for &lt;code&gt;&amp;lt;&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%3E&lt;/code&gt; for &lt;code&gt;&amp;gt;&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;See this\n&lt;a href=\&quot;https://perishablepress.com/stop-using-unsafe-characters-in-urls/\&quot;&gt;character encoding chart&lt;/a&gt;\nto learn which other characters must be percent-encoded. You can use\n&lt;code&gt;Terminal.encodeURIComponent&lt;/code&gt; which is a more stringent version of doing the character encoding; it percent-encodes other symbols such as:&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;&lt;code&gt;%27&lt;/code&gt; for &lt;code&gt;&amp;#39;&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%28&lt;/code&gt; for &lt;code&gt;(&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%29&lt;/code&gt; for &lt;code&gt;)&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%3B&lt;/code&gt; for &lt;code&gt;;&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;Here is an example of a URL query script using JavaScript in a simple-compiled\napplication:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;https://www.myphysicslab.com/develop/build/sims/pendulum/DoublePendulumApp-en.html?\nsimRun.pause();simRun.reset();sim.setGravity(5.0);statusView.getDisplayList()\n.add(energyGraph);statusView.getDisplayList().add(displayClock);\nvar%20va&amp;#61;sim.getVarsList();va.setValue(0,0.15545);va.setValue(1,-0.33548);\nva.setValue(2,-2.30681);va.setValue(3,2.68179);sim.saveInitialState();\nsimRun.resume();layout.showTerminal(true);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;a href=\&quot;https://www.myphysicslab.com/develop/build/sims/pendulum/DoublePendulumApp-en.html?simRun.pause%28%29;simRun.reset%28%29;sim.setGravity%285.0%29;statusView.getDisplayList%28%29.add%28energyGraph%29;statusView.getDisplayList%28%29.add%28displayClock%29;var%20va&amp;#61;sim.getVarsList%28%29;va.setValue%280,0.15545%29;va.setValue%281,-0.33548%29;va.setValue%282,-2.30681%29;va.setValue%283,2.68179%29;sim.saveInitialState%28%29;simRun.resume%28%29;layout.showTerminal%28true%29;\&quot;&gt;Try this link&lt;/a&gt;\nwhich contains the above code; you should also see the code in the Terminal output area.&lt;/p&gt;\n&lt;p&gt;Here is an interactive tool for trying out\n&lt;a href=\&quot;https://www.url-encode-decode.com\&quot;&gt;URL Encode/Decode&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;sessionhistory\&quot;&gt;&lt;/a&gt;\nSession History&lt;/h2&gt;\n&lt;p&gt;The session history feature recalls previous input lines; these are accessed using the\nup/down arrow keys. Command-K clears the output area.&lt;/p&gt;\n&lt;p&gt;This feature is only for the convenience of the Terminal user, and has no relation to\nthe script storage feature.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;scriptstorage\&quot;&gt;&lt;/a&gt;\nScript Storage&lt;/h2&gt;\n&lt;p&gt;It is possible to store scripts in\n&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\&quot;&gt;HTML5 Local Storage&lt;/a&gt;\nby using the methods &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#remember\&quot;&gt;&lt;code&gt;#remember&lt;/code&gt;&lt;/a&gt;, &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#recall\&quot;&gt;&lt;code&gt;#recall&lt;/code&gt;&lt;/a&gt;, and &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#forget\&quot;&gt;&lt;code&gt;#forget&lt;/code&gt;&lt;/a&gt;. These\nwill customize a simulation by remembering a specific script which is executed whenever\nthe page loads on that user&amp;#39;s machine.&lt;/p&gt;\n&lt;p&gt;On startup most applications call &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#parseURLorRecall\&quot;&gt;&lt;code&gt;#parseURLorRecall&lt;/code&gt;&lt;/a&gt; which calls &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#recall\&quot;&gt;&lt;code&gt;#recall&lt;/code&gt;&lt;/a&gt;\nunless there is a URL script which would take priority.&lt;/p&gt;\n&lt;p&gt;If no script is explicitly supplied to &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#remember\&quot;&gt;&lt;code&gt;#remember&lt;/code&gt;&lt;/a&gt;, then the scripts in the\nTerminal output window are saved, as returned by the method &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#commands\&quot;&gt;&lt;code&gt;#commands&lt;/code&gt;&lt;/a&gt;. A user\ncan edit the contents of the Terminal output window to change what is remembered.\nCommands are any line in the output text area that start with &amp;#39;&amp;gt; &amp;#39;.&lt;/p&gt;\n&lt;p&gt;The &lt;code&gt;remember()&lt;/code&gt; method saves a script specific for the current page and browser.\nIf you load the page under a different browser, or for a different locale, there will\nbe a different stored script.\nSee &lt;a href=\&quot;Building.html#internationalizationi18n\&quot;&gt;Internationalization&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;advanced-compiledisablesjavascript\&quot;&gt;&lt;/a&gt;\nAdvanced-compile disables JavaScript&lt;/h2&gt;\n&lt;p&gt;When using &lt;a href=\&quot;Building.html#advancedvs.simplecompile\&quot;&gt;advanced-compile&lt;/a&gt; only EasyScript\ncan be executed in Terminal, not JavaScript code.&lt;/p&gt;\n&lt;p&gt;Advanced compilation causes class and method names to be minified to one or two\ncharacters, so scripts based on non-minified names will not work. Also, unused\ncode is eliminated, so desired features might be missing.&lt;/p&gt;\n&lt;p&gt;However, names that are &lt;em&gt;exported&lt;/em&gt; can be used in HTML scripts under\nadvanced-compile. For example, we export the &lt;code&gt;eval&lt;/code&gt; method in\n&lt;code&gt;myphysicslab.sims.common.AbstractApp&lt;/code&gt; so that EasyScript can be executed via\n&lt;code&gt;app.eval()&lt;/code&gt; even under advanced-compile.\nSee &lt;a href=\&quot;Building.html#exportingsymbols\&quot;&gt;Exporting Symbols&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;Security considerations are another reason to disable JavaScript code under\nadvanced-compile. The &lt;a href=\&quot;#safesubsetofjavascript\&quot;&gt;safe subset&lt;/a&gt; strategy used here depends\non detecting names in the script such as &lt;code&gt;window&lt;/code&gt;, &lt;code&gt;eval&lt;/code&gt;, &lt;code&gt;myEval&lt;/code&gt;, &lt;code&gt;whiteList_&lt;/code&gt;, etc.\nBecause advanced-compile renames many of these, we are no longer able to detect their\nusage. For example, an attacker could figure out what the &lt;code&gt;Terminal.myEval&lt;/code&gt; function\nwas renamed to, and enter a script that would call that function; this would not be\ndetected by the &amp;#39;safe subset&amp;#39; checking which is looking for &lt;code&gt;myEval&lt;/code&gt;, not for whatever\nthat method got renamed to.&lt;/p&gt;\n&quot;]]],[null,null,null,null,null,1],null,[[[&quot;i18n_strings&quot;,[null,1460,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Set of internationalized strings.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[null,null,null,null,[[[&quot;FORGET&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]]],[&quot;REMEMBER&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]]]],[[&quot;regexPair&quot;,[null,1452,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;A regular expression and the replacement string expression to be used in a\n&lt;code&gt;String.replace()&lt;/code&gt; command.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,1]],[null,null,null,null,[[[&quot;regex&quot;,[null,null,null,[&quot;RegExp&quot;,null,null,1,[]]]],[&quot;replace&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]]]]],null,[[[&quot;deUnicode&quot;,[null,678,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Replace unicode characters with the regular text. Example: &lt;code&gt;\\x64&lt;/code&gt; and &lt;code&gt;\\u0064&lt;/code&gt; are\nreplaced with &lt;code&gt;d&lt;/code&gt;. This is so our blacklist checking can work (this defeats the hack\nof spelling &amp;#34;window&amp;#34; like &amp;#34;win\\u0064ow&amp;#34;).\nSee &lt;a href=\&quot;#safesubsetofjavascript\&quot;&gt;Safe Subset of JavaScript&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;s&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the string to modify&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the string with unicode characters replaced&lt;/p&gt;\n&quot;]]]],[]],[[&quot;encodeURIComponent&quot;,[null,692,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;This is a more stringent version of\n&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\&quot;&gt;encodeURIComponent&lt;/a&gt;\nwhich adheres to &lt;a href=\&quot;https://tools.ietf.org/html/rfc3986\&quot;&gt;RFC 3986&lt;/a&gt; which reserves\ncharacters &lt;code&gt;!&amp;#39;()*&lt;/code&gt;. Some websites (such as reddit) will not accept a user supplied URL\nthat contains those characters.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;str&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the string to encode&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the encoded string&lt;/p&gt;\n&quot;]]]],[]],[[&quot;stdRegex&quot;,[null,1322,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Adds the standard set of regular expression rules to the given Terminal instance.\nThese regular expression rules replace &lt;a href=\&quot;#shortnames\&quot;&gt;short names&lt;/a&gt; with the full\nexpression that is valid JavaScript for referring to the object. This defines short\nnames for many classes and also utility functions like &lt;code&gt;prettyPrint&lt;/code&gt;, &lt;code&gt;methodsOf&lt;/code&gt;,\n&lt;code&gt;println&lt;/code&gt; and &lt;code&gt;propertiesOf&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;terminal&quot;,[null,null,null,[&quot;myphysicslab.lab.util.Terminal&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.Terminal.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the Terminal instance to which the regexp&amp;#39;s will be added&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;vetBrackets&quot;,[null,1402,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Throws an error if the script contains prohibited usage of square brackets.\nSee &lt;a href=\&quot;#safesubsetofjavascript\&quot;&gt;Safe Subset of JavaScript&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;This allows using square brackets to create an array containing anything (for example\nan array of strings), but prohibits expressions that look like a property access with\nsquare brackets -- except for the case of a non-negative integer inside the brackets\nwhich is an access of a numbered array property.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;script&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]]]],null,[[null,[null,null,null,[&quot;Error&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;if the script contains prohibited code.&lt;/p&gt;\n&quot;]]]]]],[[&quot;vetCommand&quot;,[null,1427,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Throws an error if the script contains prohibited code.\nSee &lt;a href=\&quot;#safesubsetofjavascript\&quot;&gt;Safe Subset of JavaScript&lt;/a&gt;. Note that &lt;code&gt;eval&lt;/code&gt; is not\nprohibited by default, but you can add a blackList regexp for it.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;script&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]]],[&quot;whiteList&quot;,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]],[[[null,&quot;&lt;p&gt;list of allowed commands&lt;/p&gt;\n&quot;]]]],[&quot;opt_blackList&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;RegExp&quot;,null,null,1,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;additional prohibited commands&lt;/p&gt;\n&quot;]]]]],null,[[null,[null,null,null,[&quot;Error&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;if the script contains prohibited code.&lt;/p&gt;\n&quot;]]]]]]],[[[&quot;en&quot;,[null,1465,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[null,null,null,null,[[[&quot;FORGET&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]]],[&quot;REMEMBER&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]]]]],[[&quot;Terminal&quot;,[null,397,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Executes scripts and provides a command line user interface with separate text\nfields for input and output. Executes EasyScript or JavaScript. The JavaScript is a\nsafe subset to prevent malicious scripts. Allows use of &amp;#34;short names&amp;#34; to replace full\nnamespace pathnames of classes.&lt;/p&gt;\n&lt;p&gt;After the script is executed the result is converted to text and displayed in the\noutput text field. The output is not displayed if the result is &lt;code&gt;undefined&lt;/code&gt; or the\nscript ends with a semicolon.&lt;/p&gt;\n&lt;p&gt;See also &lt;a href=\&quot;Customizing.html\&quot;&gt;Customizing myPhysicsLab Software&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;Getting Help&lt;/h2&gt;\n&lt;p&gt;Type &lt;code&gt;help&lt;/code&gt; in the Terminal input text area and press return to see the help message.\nSeveral useful Terminal commands are shown. The help message also specifies whether the\ncode was &lt;em&gt;simple-compiled&lt;/em&gt; or &lt;em&gt;advanced-compiled&lt;/em&gt;.&lt;/p&gt;\n&lt;p&gt;Perhaps the most useful command is &lt;code&gt;vars&lt;/code&gt; which shows the list of variables that are\navailable.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;twotypesofscripts\&quot;&gt;&lt;/a&gt;\nTwo Types of Scripts&lt;/h2&gt;\n&lt;p&gt;Terminal can execute two types of scripts:&lt;/p&gt;\n&lt;ol&gt;&lt;li&gt;\n&lt;p&gt;JavaScript: a safe subset of JavaScript, where you can use short-names that are\nrun thru &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#expand\&quot;&gt;&lt;code&gt;#expand&lt;/code&gt;&lt;/a&gt;. JavaScript is only available when the application\nhas been\n&lt;a href=\&quot;https://www.myphysicslab.com/develop/docs/Building.html#advancedvs.simplecompile\&quot;&gt;simple-compiled&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;EasyScript: a very simple scripting language for setting Parameter values.\nSee &lt;code&gt;myphysicslab.lab.util.EasyScriptParser&lt;/code&gt; for syntax details.\nWorks with either simple or advanced-compile&lt;/p&gt;\n&lt;/li&gt;&lt;/ol&gt;\n&lt;p&gt;These two types of script can be intermixed in a single script as long as they are\nseparated by a semicolon. For example, here are both types of scripts in\none script which could be entered in\n&lt;a href=\&quot;https://www.myphysicslab.com/develop/build/sims/pendulum/PendulumApp-en.html?SHOW_TERMINAL&amp;#61;true\&quot;&gt;simple-compiled PendulumApp&lt;/a&gt;.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;DAMPING&amp;#61;0.1; GRAVITY&amp;#61;9.8; ANGLE&amp;#61;2.5; bob.setFillStyle(&amp;#39;red&amp;#39;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The first three commands are EasyScript commands that set Parameter values; the last is\na JavaScript command.&lt;/p&gt;\n&lt;p&gt;In most simple-compiled applications EasyScriptParser is available in the variable\n&lt;code&gt;easyScript&lt;/code&gt;, which you can use to execute EasyScript from within JavaScript. Here are\nexamples that can be entered in\n&lt;a href=\&quot;https://www.myphysicslab.com/develop/build/sims/pendulum/PendulumApp-en.html?SHOW_TERMINAL&amp;#61;true\&quot;&gt;simple-compiled PendulumApp&lt;/a&gt;.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;easyScript.parse(&amp;#39;angle&amp;#39;)\n\neasyScript.parse(&amp;#39;angle&amp;#61;&amp;#39;&amp;#43;Math.PI/2)\n\neasyScript.getParameter(&amp;#39;gravity&amp;#39;).getValue()\n\neasyScript.getParameter(&amp;#39;gravity&amp;#39;).setValue(2.5)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;&lt;a id=\&quot;safesubsetofjavascript\&quot;&gt;&lt;/a&gt;\nSafe Subset of JavaScript&lt;/h2&gt;\n&lt;p&gt;To prevent malicious scripts from being executed, only a safe subset of JavaScript is\nallowed. See the book &lt;em&gt;JavaScript: The Definitive Guide&lt;/em&gt; by Flanagan, section 11.1.2\n&amp;#39;Subsets for Security&amp;#39;. JavaScript commands are executed via the JavaScript &lt;code&gt;eval&lt;/code&gt;\nfunction under\n&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode\&quot;&gt;strict mode&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;We prohibit access to:&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;most global variables including the &lt;code&gt;window&lt;/code&gt; object which defines global variables.&lt;/li&gt;&lt;li&gt;certain methods and properties of Terminal.&lt;/li&gt;&lt;li&gt;properties and methods that access or change the structure of the HTML document.&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;We allow usage of the JavaScript &lt;code&gt;eval&lt;/code&gt; function, but it is mapped to the Terminal\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#eval\&quot;&gt;&lt;code&gt;#eval&lt;/code&gt;&lt;/a&gt; which does the vetting of the script.&lt;/p&gt;\n&lt;p&gt;Property access with square brackets is prohibited, except for accessing array elements\nwith non-negative integers. This is to prevent accessing prohibited properties by\nmanipulating strings to fool the &amp;#34;safe subset&amp;#34; checking. For example the following is\nnot allowed:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; terminal[&amp;#39;white&amp;#39;&amp;#43;&amp;#39;List_&amp;#39;]\nError: prohibited usage of square brackets in script: terminal[&amp;#39;white&amp;#39;&amp;#43;&amp;#39;List_&amp;#39;]\n&amp;gt; var idx &amp;#61; &amp;#39;whiteList_&amp;#39;\nwhiteList_\n&amp;gt; terminal[idx]\nError: prohibited usage of square brackets in script: terminal[idx]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Array access can be done only with a non-negative integer number:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; var a &amp;#61; [&amp;#34;red&amp;#34;, &amp;#34;green&amp;#34;, &amp;#34;blue&amp;#34;]\nred,green,blue\n&amp;gt; a[2]\nblue\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Array access cannot be done with a variable or expression, but you can use the built-in\nfunctions &lt;a href=\&quot;myphysicslab.lab.util.Util.html#module$exports$myphysicslab$lab$util$Util.get\&quot;&gt;&lt;code&gt;Util#get&lt;/code&gt;&lt;/a&gt; and &lt;a href=\&quot;myphysicslab.lab.util.Util.html#module$exports$myphysicslab$lab$util$Util.set\&quot;&gt;&lt;code&gt;Util#set&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; a[1&amp;#43;1]\nError: prohibited usage of square brackets in script: a[1&amp;#43;1]\n&amp;gt; Util.get(a, 1&amp;#43;1)\nblue\n&amp;gt; Util.set(a, 1&amp;#43;1, &amp;#34;orange&amp;#34;)\norange\n&amp;gt; a\nred,green,orange\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;&lt;a id=\&quot;shortnames\&quot;&gt;&lt;/a&gt;\nShort Names&lt;/h2&gt;\n&lt;p&gt;To allow for shorter scripts, we define a variety of regular expressions which\nconvert short names to their proper long expanded form.&lt;/p&gt;\n&lt;p&gt;Most class names will have their equivalent short-name defined. For example you can type&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; new DoubleRect(0,0,1,1)\nDoubleRect{left_: 0, bottom_: 0, right_: 1, top_: 1}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;instead of&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; new myphysicslab.lab.util.DoubleRect(0,0,1,1)\nDoubleRect{left_: 0, bottom_: 0, right_: 1, top_: 1}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Applications will typically make their key objects available with short-names.\nSo instead of &lt;code&gt;app.sim&lt;/code&gt; you can just type &lt;code&gt;sim&lt;/code&gt;.\nYou can see this at work by using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#setVerbose\&quot;&gt;&lt;code&gt;#setVerbose&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; terminal.setVerbose(true)\n&amp;gt; new Vector(2,3)\n&amp;gt;&amp;gt; new myphysicslab.lab.util.Vector(2,3)\nVector{x: 2, y: 3}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In verbose mode, the command is echoed a second time to show how it appears after\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#expand\&quot;&gt;&lt;code&gt;expansion&lt;/code&gt;&lt;/a&gt;. The terminal prompt symbol is doubled to distinguish\nthe expanded version.&lt;/p&gt;\n&lt;p&gt;Short-names are implemented by defining a set of regular expression replacement rules\nwhich are applied to the Terminal input string before it is executed.&lt;/p&gt;\n&lt;p&gt;Regular expression rules are registered with Terminal using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#addRegex\&quot;&gt;&lt;code&gt;#addRegex&lt;/code&gt;&lt;/a&gt;. Then\nwhenever a command is evaluated it is first expanded to the long form and vetted using\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#expand\&quot;&gt;&lt;code&gt;#expand&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#module$exports$myphysicslab$lab$util$Terminal.stdRegex\&quot;&gt;&lt;code&gt;Terminal.stdRegex&lt;/code&gt;&lt;/a&gt; defines a standard set of regular expressions for\nexpanding myPhysicsLab class names (like &lt;code&gt;DoubleRect&lt;/code&gt;) and for expanding a few function\nshortcuts like &lt;code&gt;methodsOf&lt;/code&gt;, &lt;code&gt;propertiesOf&lt;/code&gt; and &lt;code&gt;prettyPrint&lt;/code&gt;. An application can add\nmore shortcuts via &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#addRegex\&quot;&gt;&lt;code&gt;#addRegex&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;The Result Variable&lt;/h2&gt;\n&lt;p&gt;The result of the last Terminal script is stored in a variable named &lt;code&gt;result&lt;/code&gt;. Here is\nan example Terminal session:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; 2&amp;#43;2\n4\n&amp;gt; result*2\n8\n&amp;gt; result*2\n16\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#eval\&quot;&gt;&lt;code&gt;#eval&lt;/code&gt;&lt;/a&gt; has an argument called &lt;code&gt;output&lt;/code&gt; which if set to &lt;code&gt;false&lt;/code&gt;\nprevents &lt;code&gt;result&lt;/code&gt; from being updated. When &lt;code&gt;output&amp;#61;&amp;#61;false&lt;/code&gt;, then &lt;code&gt;result&lt;/code&gt; is is defined\nfor commands in the same string, but that version of &lt;code&gt;result&lt;/code&gt; is temporary and\nindependent of the permanent &lt;code&gt;result&lt;/code&gt; variable.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;thezobject\&quot;&gt;&lt;/a&gt;\nThe z Object&lt;/h2&gt;\n&lt;p&gt;&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode\&quot;&gt;Strict mode&lt;/a&gt;\nprevents adding global variables when using the JavaScript &lt;code&gt;eval&lt;/code&gt; command.\nTo allow making variables that persist between commands, Terminal provides an object\nnamed &lt;code&gt;z&lt;/code&gt; where properties can be added:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; z.a &amp;#61; 1\n1\n&amp;gt; z.a\n1\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This &lt;code&gt;z&lt;/code&gt; object is a property of Terminal; &lt;code&gt;z&lt;/code&gt; is initially an object with no\nproperties. We define a &lt;a href=\&quot;#shortnames\&quot;&gt;short name&lt;/a&gt; regular expression so that referring\nto &lt;code&gt;z&lt;/code&gt; is replaced by &lt;code&gt;terminal.z&lt;/code&gt; when the command is executed.&lt;/p&gt;\n&lt;h2&gt;Declaring a Variable&lt;/h2&gt;\n&lt;p&gt;To hide the usage of the &lt;code&gt;z&lt;/code&gt; object, Terminal interprets the &lt;code&gt;var&lt;/code&gt; keyword in a\nspecial way.&lt;/p&gt;\n&lt;p&gt;When Terminal sees the &lt;code&gt;var&lt;/code&gt; keyword at the start of a command, it changes the script\nto use the &lt;code&gt;z&lt;/code&gt; object and defines a short-name. For example the command&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; var foo &amp;#61; 3\n3\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;is translated to&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; z.foo &amp;#61; 3\n3\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;and thereafter every reference to &lt;code&gt;foo&lt;/code&gt; will be changed to &lt;code&gt;z.foo&lt;/code&gt; in later commands.\nYou can see this at work by using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#setVerbose\&quot;&gt;&lt;code&gt;#setVerbose&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;&amp;gt; terminal.setVerbose(true)\n&amp;gt; foo\n&amp;gt;&amp;gt; app.terminal.z.foo\n3\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;The terminal Variable&lt;/h2&gt;\n&lt;p&gt;Some features require that the name &lt;code&gt;terminal&lt;/code&gt; is defined and resolves to the Terminal\nobject. These features include the &lt;code&gt;z&lt;/code&gt; variable, the &lt;code&gt;result&lt;/code&gt; variable, and the usage\nof the &lt;code&gt;var&lt;/code&gt; keyword.&lt;/p&gt;\n&lt;p&gt;In most applications this is accomplished by using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#addRegex\&quot;&gt;&lt;code&gt;#addRegex&lt;/code&gt;&lt;/a&gt; something like\nthis:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;terminal.addRegex(&amp;#39;terminal&amp;#39;, &amp;#39;app&amp;#39;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;where &lt;code&gt;app&lt;/code&gt; is the global variable containing the application. The purpose of the regex\nis to replace the word &lt;code&gt;terminal&lt;/code&gt; with &lt;code&gt;app.terminal&lt;/code&gt; which is a valid JavaScript\nreference.&lt;/p&gt;\n&lt;p&gt;(In unit tests of Terminal, we temporarily define a global variable named &lt;code&gt;terminal&lt;/code&gt;.)&lt;/p&gt;\n&lt;h2&gt;Cautions About Newline Character&lt;/h2&gt;\n&lt;p&gt;When you paste a script into the Terminal text input field, be aware that &lt;em&gt;newlines are\nreplaced by spaces&lt;/em&gt;. For a multi-line script this can cause errors. To prevent problems:&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;\n&lt;p&gt;Use explicit semicolons instead of relying on JavaScript&amp;#39;s policy about optional\nsemicolons.&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;Use slash-star style comments instead of double-slash style comments (which are\nterminated by a newline).&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;If for some reason you really need a newline in the script, use &lt;code&gt;\\u000A&lt;/code&gt; or &lt;code&gt;\\x0A&lt;/code&gt;.\nThese are replaced with the newline character before the script is evaluated.&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;Put the multi-line script in a\n&lt;a href=\&quot;Customizing.html#customizingthestart-uphtmlpage\&quot;&gt;start-up HTML page&lt;/a&gt;. You can\nthen call &lt;code&gt;Terminal.eval()&lt;/code&gt; directly on a string that you create, and that\nstring can include newline characters.&lt;/p&gt;\n&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;The tab character also cannot be input directly to the Terminal input field, because\nthe browser interprets that to mean &amp;#34;move to the next field&amp;#34;. You can use &lt;code&gt;\\u0009&lt;/code&gt; or\n&lt;code&gt;\\x09&lt;/code&gt; which are replaced by a tab character before the script is evaluated.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;urlqueryscript\&quot;&gt;&lt;/a&gt;\nURL Query Script&lt;/h2&gt;\n&lt;p&gt;A Terminal script can be embedded into a URL\n&lt;a href=\&quot;https://en.wikipedia.org/wiki/Query_string\&quot;&gt;query string&lt;/a&gt; which will be executed when\nthe page is loaded. This provides a convenient way to remember or share a customized\nsimulation with someone else.&lt;/p&gt;\n&lt;p&gt;The script follows a question mark in the URL, so it is called a &amp;#39;query script&amp;#39;\nor &amp;#39;query URL&amp;#39;. Here is an\n&lt;a href=\&quot;https://www.myphysicslab.com/pendulum/pendulum-en.html?DRIVE_AMPLITUDE&amp;#61;0;DAMPING&amp;#61;0.1;GRAVITY&amp;#61;9.8;ANGLE&amp;#61;2.5;ANGLE_VELOCITY&amp;#61;0;\&quot;&gt;example&lt;/a&gt;:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;https://www.myphysicslab.com/pendulum/pendulum-en.html?DRIVE_AMPLITUDE&amp;#61;0;\nDAMPING&amp;#61;0.1;GRAVITY&amp;#61;9.8;ANGLE&amp;#61;2.5;ANGLE_VELOCITY&amp;#61;0;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The URL Query Script is executed at startup by calling &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#parseURL\&quot;&gt;&lt;code&gt;#parseURL&lt;/code&gt;&lt;/a&gt; or\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#parseURLorRecall\&quot;&gt;&lt;code&gt;#parseURLorRecall&lt;/code&gt;&lt;/a&gt;.  Most myPhysicsLab applications do this.&lt;/p&gt;\n&lt;p&gt;Some websites will only accept user-supplied URLs that follow the strict guidelines of\n&lt;a href=\&quot;https://en.wikipedia.org/wiki/Percent-encoding\&quot;&gt;URL percent-encoding&lt;/a&gt;. Therefore\nwe must substitute in the URL:&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;&lt;code&gt;%20&lt;/code&gt; for space&lt;/li&gt;&lt;li&gt;&lt;code&gt;%22&lt;/code&gt; for &lt;code&gt;&amp;#34;&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%3C&lt;/code&gt; for &lt;code&gt;&amp;lt;&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%3E&lt;/code&gt; for &lt;code&gt;&amp;gt;&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;See this\n&lt;a href=\&quot;https://perishablepress.com/stop-using-unsafe-characters-in-urls/\&quot;&gt;character encoding chart&lt;/a&gt;\nto learn which other characters must be percent-encoded. You can use\n&lt;code&gt;Terminal.encodeURIComponent&lt;/code&gt; which is a more stringent version of doing the character encoding; it percent-encodes other symbols such as:&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;&lt;code&gt;%27&lt;/code&gt; for &lt;code&gt;&amp;#39;&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%28&lt;/code&gt; for &lt;code&gt;(&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%29&lt;/code&gt; for &lt;code&gt;)&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;%3B&lt;/code&gt; for &lt;code&gt;;&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;Here is an example of a URL query script using JavaScript in a simple-compiled\napplication:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;https://www.myphysicslab.com/develop/build/sims/pendulum/DoublePendulumApp-en.html?\nsimRun.pause();simRun.reset();sim.setGravity(5.0);statusView.getDisplayList()\n.add(energyGraph);statusView.getDisplayList().add(displayClock);\nvar%20va&amp;#61;sim.getVarsList();va.setValue(0,0.15545);va.setValue(1,-0.33548);\nva.setValue(2,-2.30681);va.setValue(3,2.68179);sim.saveInitialState();\nsimRun.resume();layout.showTerminal(true);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;a href=\&quot;https://www.myphysicslab.com/develop/build/sims/pendulum/DoublePendulumApp-en.html?simRun.pause%28%29;simRun.reset%28%29;sim.setGravity%285.0%29;statusView.getDisplayList%28%29.add%28energyGraph%29;statusView.getDisplayList%28%29.add%28displayClock%29;var%20va&amp;#61;sim.getVarsList%28%29;va.setValue%280,0.15545%29;va.setValue%281,-0.33548%29;va.setValue%282,-2.30681%29;va.setValue%283,2.68179%29;sim.saveInitialState%28%29;simRun.resume%28%29;layout.showTerminal%28true%29;\&quot;&gt;Try this link&lt;/a&gt;\nwhich contains the above code; you should also see the code in the Terminal output area.&lt;/p&gt;\n&lt;p&gt;Here is an interactive tool for trying out\n&lt;a href=\&quot;https://www.url-encode-decode.com\&quot;&gt;URL Encode/Decode&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;sessionhistory\&quot;&gt;&lt;/a&gt;\nSession History&lt;/h2&gt;\n&lt;p&gt;The session history feature recalls previous input lines; these are accessed using the\nup/down arrow keys. Command-K clears the output area.&lt;/p&gt;\n&lt;p&gt;This feature is only for the convenience of the Terminal user, and has no relation to\nthe script storage feature.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;scriptstorage\&quot;&gt;&lt;/a&gt;\nScript Storage&lt;/h2&gt;\n&lt;p&gt;It is possible to store scripts in\n&lt;a href=\&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\&quot;&gt;HTML5 Local Storage&lt;/a&gt;\nby using the methods &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#remember\&quot;&gt;&lt;code&gt;#remember&lt;/code&gt;&lt;/a&gt;, &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#recall\&quot;&gt;&lt;code&gt;#recall&lt;/code&gt;&lt;/a&gt;, and &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#forget\&quot;&gt;&lt;code&gt;#forget&lt;/code&gt;&lt;/a&gt;. These\nwill customize a simulation by remembering a specific script which is executed whenever\nthe page loads on that user&amp;#39;s machine.&lt;/p&gt;\n&lt;p&gt;On startup most applications call &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#parseURLorRecall\&quot;&gt;&lt;code&gt;#parseURLorRecall&lt;/code&gt;&lt;/a&gt; which calls &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#recall\&quot;&gt;&lt;code&gt;#recall&lt;/code&gt;&lt;/a&gt;\nunless there is a URL script which would take priority.&lt;/p&gt;\n&lt;p&gt;If no script is explicitly supplied to &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#remember\&quot;&gt;&lt;code&gt;#remember&lt;/code&gt;&lt;/a&gt;, then the scripts in the\nTerminal output window are saved, as returned by the method &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#commands\&quot;&gt;&lt;code&gt;#commands&lt;/code&gt;&lt;/a&gt;. A user\ncan edit the contents of the Terminal output window to change what is remembered.\nCommands are any line in the output text area that start with &amp;#39;&amp;gt; &amp;#39;.&lt;/p&gt;\n&lt;p&gt;The &lt;code&gt;remember()&lt;/code&gt; method saves a script specific for the current page and browser.\nIf you load the page under a different browser, or for a different locale, there will\nbe a different stored script.\nSee &lt;a href=\&quot;Building.html#internationalizationi18n\&quot;&gt;Internationalization&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;advanced-compiledisablesjavascript\&quot;&gt;&lt;/a&gt;\nAdvanced-compile disables JavaScript&lt;/h2&gt;\n&lt;p&gt;When using &lt;a href=\&quot;Building.html#advancedvs.simplecompile\&quot;&gt;advanced-compile&lt;/a&gt; only EasyScript\ncan be executed in Terminal, not JavaScript code.&lt;/p&gt;\n&lt;p&gt;Advanced compilation causes class and method names to be minified to one or two\ncharacters, so scripts based on non-minified names will not work. Also, unused\ncode is eliminated, so desired features might be missing.&lt;/p&gt;\n&lt;p&gt;However, names that are &lt;em&gt;exported&lt;/em&gt; can be used in HTML scripts under\nadvanced-compile. For example, we export the &lt;code&gt;eval&lt;/code&gt; method in\n&lt;code&gt;myphysicslab.sims.common.AbstractApp&lt;/code&gt; so that EasyScript can be executed via\n&lt;code&gt;app.eval()&lt;/code&gt; even under advanced-compile.\nSee &lt;a href=\&quot;Building.html#exportingsymbols\&quot;&gt;Exporting Symbols&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;Security considerations are another reason to disable JavaScript code under\nadvanced-compile. The &lt;a href=\&quot;#safesubsetofjavascript\&quot;&gt;safe subset&lt;/a&gt; strategy used here depends\non detecting names in the script such as &lt;code&gt;window&lt;/code&gt;, &lt;code&gt;eval&lt;/code&gt;, &lt;code&gt;myEval&lt;/code&gt;, &lt;code&gt;whiteList_&lt;/code&gt;, etc.\nBecause advanced-compile renames many of these, we are no longer able to detect their\nusage. For example, an attacker could figure out what the &lt;code&gt;Terminal.myEval&lt;/code&gt; function\nwas renamed to, and enter a script that would call that function; this would not be\ndetected by the &amp;#39;safe subset&amp;#39; checking which is looking for &lt;code&gt;myEval&lt;/code&gt;, not for whatever\nthat method got renamed to.&lt;/p&gt;\n&quot;]]],null,null,[null,null,null,null,null,1],null,null,[],[]],[],1,[[&quot;term_input&quot;,[null,null,null,null,null,[[[null,null,null,[&quot;HTMLInputElement&quot;,null,null,null,[]]],[null,null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;A text input field where user can enter a\nscript to evaluate, or &lt;code&gt;null&lt;/code&gt;.&lt;/p&gt;\n&quot;]]]],[&quot;term_output&quot;,[null,null,null,null,null,[[[null,null,null,[&quot;HTMLInputElement&quot;,null,null,null,[]]],[null,null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;A multi-line textarea where results are\nshown, or &lt;code&gt;null&lt;/code&gt;&lt;/p&gt;\n&quot;]]]]],null,[]],[[[&quot;addRegex&quot;,[null,553,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Adds a regular expression rule for transforming scripts before they are executed.&lt;/p&gt;\n&lt;p&gt;One usage is to prepend the namespace to fully qualify a &lt;a href=\&quot;#shortnames\&quot;&gt;short name&lt;/a&gt;.\nFor example, to transform &lt;code&gt;DoubleRect&lt;/code&gt; into &lt;code&gt;myphysicslab.lab.util.DoubleRect&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;terminal.addRegex(&amp;#39;DoubleRect&amp;#39;, &amp;#96;myphysicslab.lab.util.&amp;#39;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Another usage is to make properties of an object available as a single short name.\nFor example to transform &lt;code&gt;rod&lt;/code&gt; or &lt;code&gt;bob&lt;/code&gt; into &lt;code&gt;app.rod&lt;/code&gt; or &lt;code&gt;app.bob&lt;/code&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;terminal.addRegex(&amp;#39;rod|bob&amp;#39;, &amp;#39;app.&amp;#39;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The regular expression rule is added to the end of the list of regex&amp;#39;s to execute,\nunless &lt;code&gt;opt_prepend&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;names&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;set of names separated by &lt;code&gt;|&lt;/code&gt; symbol&lt;/p&gt;\n&quot;]]]],[&quot;prefix&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the string to prepend to each occurence of the names&lt;/p&gt;\n&quot;]]]],[&quot;opt_addToVars&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;if &lt;code&gt;true&lt;/code&gt;, then the set of names is added to the\nset of defined names returned by &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#vars\&quot;&gt;&lt;code&gt;#vars&lt;/code&gt;&lt;/a&gt;; default is &lt;code&gt;true&lt;/code&gt;&lt;/p&gt;\n&quot;]]]],[&quot;opt_prepend&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;if &lt;code&gt;true&lt;/code&gt;, then the regex rule is added to the front\nof the list of regex&amp;#39;s to execute; default is &lt;code&gt;false&lt;/code&gt;&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;whether the regex rule was added (returns &lt;code&gt;false&lt;/code&gt; if the regex rule\nalready exists)&lt;/p&gt;\n&quot;]]]],[]],[[&quot;addWhiteList&quot;,[null,597,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Adds the string to white list of allowed expressions.\nSee &lt;a href=\&quot;#safesubsetofjavascript\&quot;&gt;Safe Subset of JavaScript&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;name&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;string to add to white list&lt;/p&gt;\n&quot;]]]],[&quot;opt_addToVars&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;if &lt;code&gt;true&lt;/code&gt;, then the name is added to the\nset of defined names returned by &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#vars\&quot;&gt;&lt;code&gt;#vars&lt;/code&gt;&lt;/a&gt;; default is &lt;code&gt;true&lt;/code&gt;&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;alertOnce&quot;,[null,613,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Shows an alert with the given message, but only the first time it is called.\nThis prevents infinite loop of alerts. An example where that can happen is if an\nerror occurs during a blur or focus event, which can then repeat after the user\ndismisses the alert which causes further blur/focus events.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;msg&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the message to show&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;commands&quot;,[null,645,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns command scripts in current Terminal output text area, as array of strings,\nfor use with &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#remember\&quot;&gt;&lt;code&gt;#remember&lt;/code&gt;&lt;/a&gt;. Commands are any line in the output text area that\nstart with &lt;code&gt;&amp;gt;&lt;/code&gt;. Each script is also trimmed of leading or trailing whitespace.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]],[[[null,&quot;&lt;p&gt;array of command strings in current Terminal output&lt;/p&gt;\n&quot;]]]],[]],[[&quot;destroy&quot;,[null,666,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Remove connections to other objects to facilitate garbage collection.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;eval&quot;,[null,737,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Executes the given script and returns the result. Advanced compilation disables\ngeneral JavaScript evaluation, but allows the Parser (such as EasyScriptParser).&lt;/p&gt;\n&lt;p&gt;When &lt;code&gt;opt_output&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;: updates the &lt;code&gt;result&lt;/code&gt; variable, prints the result in the\noutput text area, scrolls the output so the most recent text is visible, clears the\ninput text area, remembers the script in the &lt;a href=\&quot;#sessionhistory\&quot;&gt;session history&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;When &lt;code&gt;opt_output&lt;/code&gt; is &lt;code&gt;false&lt;/code&gt;: the &lt;code&gt;result&lt;/code&gt; variable is updated for\nsuccessive scripts (separated by a semicolon) in the same script line, but after the\nscript is finished executing the &lt;code&gt;result&lt;/code&gt; variable is unchanged. The output text area\nand session history array are unchanged.&lt;/p&gt;\n&lt;p&gt;The &lt;code&gt;opt_output&amp;#61;false&lt;/code&gt; option allows for evaluating scripts that\ndefine a variable, for example in\n&lt;code&gt;ExpressionVariable&lt;/code&gt;.\nThe ExpressionVariable script can be executed frequently without modifying the &lt;code&gt;result&lt;/code&gt;\nseen by the user in Terminal.&lt;/p&gt;\n&lt;p&gt;The script is split into pieces separated by top-level semicolons (top-level means they\nare not enclosed by braces). Each fragment is first offered to the Parser installed\nwith &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#setParser\&quot;&gt;&lt;code&gt;#setParser&lt;/code&gt;&lt;/a&gt;. If the Parser does not recognize the fragment, then the\nfragment is expanded and vetted with &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#expand\&quot;&gt;&lt;code&gt;#expand&lt;/code&gt;&lt;/a&gt; before being executed using\nJavaScript &lt;code&gt;eval&lt;/code&gt;. The vetting ensures that only a\n&lt;a href=\&quot;#safesubsetofjavascript\&quot;&gt;Safe Subset of JavaScript&lt;/a&gt; is allowed to be executed.&lt;/p&gt;\n&lt;p&gt;Error handling: when &lt;code&gt;opt_userInput&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt; we avoid throwing an error and only\nprint the error to the output text area where the user will presumably see it. When\n&lt;code&gt;opt_userInput&lt;/code&gt; is &lt;code&gt;false&lt;/code&gt; we throw the error as usual (augmenting the message with the\nscript that caused the error).&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;script&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;a fragment of JavaScript to be executed&lt;/p&gt;\n&quot;]]]],[&quot;opt_output&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;whether to print the result to the output text area and\nadd the script to session history; default is &lt;code&gt;true&lt;/code&gt;&lt;/p&gt;\n&quot;]]]],[&quot;opt_userInput&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;whether the script was input by user in Terminal\ncommand line interface; default is &lt;code&gt;false&lt;/code&gt;&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,null,null,null,1],[[[null,&quot;&lt;p&gt;the result of executing the script&lt;/p&gt;\n&quot;]]]],[[null,[null,null,null,[&quot;Error&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;if an error occurs while executing the script and &lt;code&gt;opt_userInput&lt;/code&gt;\nis false&lt;/p&gt;\n&quot;]]]]]],[[&quot;expand&quot;,[null,848,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns the given Javascript script expanded by the various regular expression\nrules which were registered with &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#addRegex\&quot;&gt;&lt;code&gt;#addRegex&lt;/code&gt;&lt;/a&gt; and vetted to not contain\nany &lt;a href=\&quot;#safesubsetofjavascript\&quot;&gt;unsafe JavaScript commands&lt;/a&gt;. The expanded script has\n&lt;a href=\&quot;#shortnames\&quot;&gt;short names&lt;/a&gt; like &lt;code&gt;DoubleRect&lt;/code&gt; expanded to have full path name like\n&lt;code&gt;myphysicslab.lab.util.DoubleRect&lt;/code&gt;. Doesn&amp;#39;t expand words inside of quoted strings\nor regular expressions.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;script&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;a Javascript script to be executed&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the script expanded by registered regular expressions&lt;/p&gt;\n&quot;]]]],[]],[[&quot;focus&quot;,[null,936,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Sets user keyboard focus to input text area.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;forget&quot;,[null,946,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Removes any locally stored script for the current page and browser.\nSee &lt;a href=\&quot;#scriptstorage\&quot;&gt;Script Storage&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;handleKey&quot;,[null,958,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Called when a key has been pressed.  Implements the &lt;code&gt;meta-K&lt;/code&gt; command to clear\nthe output area, and the up/down arrow keys to scroll through\n&lt;a href=\&quot;#sessionhistory\&quot;&gt;session history&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;evt&quot;,[null,null,null,[&quot;goog.events.KeyEvent&quot;,null,[null,null,[null,null,&quot;goog.events.KeyEvent.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the event that caused this callback to fire&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;pageKey&quot;,[null,1050,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns the identifying key to use for storing scripts for current web page in HTML5\nlocal storage. See &lt;a href=\&quot;#scriptstorage\&quot;&gt;Script Storage&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the identifying key to use for storing scripts for current web page in\nHTML5 local storage.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;parseURL&quot;,[null,1073,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Parses and executes the query portion of the current URL (the portion of the URL\nafter a question mark) as a script. See &lt;a href=\&quot;#urlqueryscript\&quot;&gt;URL Query Script&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;Before executing the query script, this calls &lt;a href=\&quot;myphysicslab.lab.util.Parser.html#saveStart\&quot;&gt;&lt;code&gt;Parser#saveStart&lt;/code&gt;&lt;/a&gt; to save the\ncurrent settings.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;returns true if there was a URL query script&lt;/p&gt;\n&quot;]]]],[]],[[&quot;parseURLorRecall&quot;,[null,1103,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Parses and executes the query portion of the current URL via &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#parseURL\&quot;&gt;&lt;code&gt;#parseURL&lt;/code&gt;&lt;/a&gt;;\nor if there is no URL query then use &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#recall\&quot;&gt;&lt;code&gt;#recall&lt;/code&gt;&lt;/a&gt; to load the stored script, if any.\nSee &lt;a href=\&quot;#scriptstorage\&quot;&gt;Script Storage&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;println&quot;,[null,1112,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Print the given text to the Terminal output text area, followed by a newline.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;text&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the text to print to the Terminal output text area&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;recall&quot;,[null,1125,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Retrieve the stored script for the current page from HTML5 local storage. Executes\nthe script if &lt;code&gt;opt_execute&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;. See &lt;a href=\&quot;#scriptstorage\&quot;&gt;Script Storage&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;opt_execute&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;&lt;code&gt;true&lt;/code&gt; (default) means execute the script;\n&lt;code&gt;false&lt;/code&gt; means don&amp;#39;t execute the script, only print it in text output area&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;remember&quot;,[null,1154,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Stores the given script in local storage to execute when this page is loaded in\nfuture. Each browser and page has a separate local storage. See &lt;a href=\&quot;#scriptstorage\&quot;&gt;Script\nStorage&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;If no script is provided then the set of Terminal scripts in the output text area are\nstored, as returned by &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#commands\&quot;&gt;&lt;code&gt;#commands&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;opt_script&quot;,[null,null,null,null,null,[[[null,null,null,[&quot;string&quot;,null,null,1,[]]],[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;the scripts to remember; or if\n&lt;code&gt;undefined&lt;/code&gt;, then stores scripts returned by &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#commands\&quot;&gt;&lt;code&gt;#commands&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;scrollDown&quot;,[null,1195,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Scroll the Terminal output text area to show last line.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;setAfterEval&quot;,[null,1213,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Sets the function to execute after evaluating the user input. Typically used to\nupdate a display such as a &lt;code&gt;SimView&lt;/code&gt; or\n&lt;code&gt;Graph&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;afterEvalFn&quot;,[1,null,null,null,null,[[[null,null,[null,null,[],[null,null,null,null,null,null,null,1]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;function to execute after evaluating\nthe user input; can be &lt;code&gt;undefined&lt;/code&gt; to turn off this feature&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;setParser&quot;,[null,1220,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Installs the Parser used to parse scripts during &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#eval\&quot;&gt;&lt;code&gt;#eval&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;parser&quot;,[null,null,null,[&quot;myphysicslab.lab.util.Parser&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.Parser.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the Parser to install.&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;setPrompt&quot;,[null,1231,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Sets the prompt symbol shown before each command.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;prompt&quot;,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the prompt symbol to show before each command&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;setVerbose&quot;,[null,1241,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Specifies whether to show the expanded command in the Terminal output text area.\nIn verbose mode, the command is echoed a second time to show how it appears after\n&lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#expand\&quot;&gt;&lt;code&gt;expansion&lt;/code&gt;&lt;/a&gt;. The terminal prompt symbol is doubled to distinguish the\nexpanded version.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;expand&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;&lt;code&gt;true&lt;/code&gt; means show expanded names in the Terminal output&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;toString&quot;,[null,521,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]]],[]],[[&quot;vars&quot;,[null,1385,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns names of the variables that have been defined using &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#addRegex\&quot;&gt;&lt;code&gt;#addRegex&lt;/code&gt;&lt;/a&gt;.\nThis is used as a &amp;#34;help&amp;#34; command for the user to know what variables are available.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;string&quot;,null,null,1,[]]]]]],[[[null,&quot;&lt;p&gt;names of defined variables, in alphabetic order&lt;/p&gt;\n&quot;]]]],[]]],[[[&quot;recalling&quot;,[null,471,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;While &lt;a href=\&quot;myphysicslab.lab.util.Terminal.html#recall\&quot;&gt;&lt;code&gt;#recall&lt;/code&gt;&lt;/a&gt; is executing scripts, this flag is true.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[[&quot;z&quot;,[null,486,null,[null,null,&quot;source/src/lab/util/Terminal.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;An object that scripts can store properties into.\nSee &lt;a href=\&quot;#thezobject\&quot;&gt;The z Object&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[null,null,null,[&quot;Object&quot;,null,null,1,[]]]]],null,[],[],[],[[&quot;myphysicslab.lab.util.Terminal&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.Terminal.html&quot;]],null,[]],null,1],null,&quot;myphysicslab.lab.util.Terminal.html&quot;,&quot;myphysicslab.lab.util.Terminal&quot;,[],[],[],[]]]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="dossier.js" defer></script>