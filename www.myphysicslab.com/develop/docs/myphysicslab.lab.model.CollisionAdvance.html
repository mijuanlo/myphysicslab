<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>myphysicslab.lab.model.CollisionAdvance</title><link href="dossier.css" rel="stylesheet" type="text/css"><script src="types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,[[[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,null,null,[null,54,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[],[[&quot;DebugLevel&quot;,null,[[[null,&quot;&lt;p&gt;Enum that specifies pre-defined groups of debug messages to show.&lt;/p&gt;\n&quot;]]],null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.DebugLevel.html&quot;]],[&quot;WayPoint&quot;,null,[[[null,&quot;&lt;p&gt;Enum that specifies debugging &amp;#39;way points&amp;#39; for &lt;code&gt;CollisionAdvance&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.WayPoint.html&quot;]]],[]],[[[null,&quot;&lt;p&gt;Handles collisions by backing up in time with binary search algorithm. For better\nperformance uses collision time estimates and handles imminent collisions.&lt;/p&gt;\n&lt;p&gt;When a collision is encountered, &lt;a href=\&quot;myphysicslab.lab.model.CollisionAdvance.html#advance\&quot;&gt;&lt;code&gt;#advance&lt;/code&gt;&lt;/a&gt; backs up to just before the time of\ncollision, handles the collision, then continues to advance to the end of the time step.\n(This process can happen many times during a single call to &lt;code&gt;advance&lt;/code&gt;). Uses a binary\nsearch algorithm to get to the time just before the collision.\nThe &lt;a href=\&quot;myphysicslab.lab.model.DiffEqSolver.html\&quot;&gt;&lt;code&gt;DiffEqSolver&lt;/code&gt;&lt;/a&gt; is used to move the simulation forward in time.&lt;/p&gt;\n&lt;h2&gt;Debugging with WayPoints&lt;/h2&gt;\n&lt;p&gt;CollisonAdvance can be very tricky to debug because the set of Collisions found drive\nthe process, yet they come and go as we move backward and forward in time. Specifying\nWayPoints lets you focus on only the relevant aspects of the process, greatly reducing\nthe volume of debug messages to sort thru.&lt;/p&gt;\n&lt;p&gt;A &lt;code&gt;WayPoint&lt;/code&gt; is a step of the AdvanceStrategy process\nwhere debug info can be printed. See the methods &lt;a href=\&quot;myphysicslab.lab.model.CollisionAdvance.html#addWayPoints\&quot;&gt;&lt;code&gt;#addWayPoints&lt;/code&gt;&lt;/a&gt;,\n&lt;a href=\&quot;myphysicslab.lab.model.CollisionAdvance.html#setWayPoints\&quot;&gt;&lt;code&gt;#setWayPoints&lt;/code&gt;&lt;/a&gt;. The method &lt;a href=\&quot;myphysicslab.lab.model.CollisionAdvance.html#setDebugLevel\&quot;&gt;&lt;code&gt;#setDebugLevel&lt;/code&gt;&lt;/a&gt; selects a pre-defined group of\nWayPoints.&lt;/p&gt;\n&lt;p&gt;See &lt;a href=\&quot;Engine2D.html#observingthecollisionhandlingprocess\&quot;&gt;Observing The Collision Handling Process&lt;/a&gt;\nin 2D Physics Engine Overview, and &lt;code&gt;CollisionAdvance.DebugLevel&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],[null,null,null,null,null,1],null,[],null,[],[],[[&quot;CollisionAdvance&quot;,[null,54,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Handles collisions by backing up in time with binary search algorithm. For better\nperformance uses collision time estimates and handles imminent collisions.&lt;/p&gt;\n&lt;p&gt;When a collision is encountered, &lt;a href=\&quot;myphysicslab.lab.model.CollisionAdvance.html#advance\&quot;&gt;&lt;code&gt;#advance&lt;/code&gt;&lt;/a&gt; backs up to just before the time of\ncollision, handles the collision, then continues to advance to the end of the time step.\n(This process can happen many times during a single call to &lt;code&gt;advance&lt;/code&gt;). Uses a binary\nsearch algorithm to get to the time just before the collision.\nThe &lt;a href=\&quot;myphysicslab.lab.model.DiffEqSolver.html\&quot;&gt;&lt;code&gt;DiffEqSolver&lt;/code&gt;&lt;/a&gt; is used to move the simulation forward in time.&lt;/p&gt;\n&lt;h2&gt;Debugging with WayPoints&lt;/h2&gt;\n&lt;p&gt;CollisonAdvance can be very tricky to debug because the set of Collisions found drive\nthe process, yet they come and go as we move backward and forward in time. Specifying\nWayPoints lets you focus on only the relevant aspects of the process, greatly reducing\nthe volume of debug messages to sort thru.&lt;/p&gt;\n&lt;p&gt;A &lt;code&gt;WayPoint&lt;/code&gt; is a step of the AdvanceStrategy process\nwhere debug info can be printed. See the methods &lt;a href=\&quot;myphysicslab.lab.model.CollisionAdvance.html#addWayPoints\&quot;&gt;&lt;code&gt;#addWayPoints&lt;/code&gt;&lt;/a&gt;,\n&lt;a href=\&quot;myphysicslab.lab.model.CollisionAdvance.html#setWayPoints\&quot;&gt;&lt;code&gt;#setWayPoints&lt;/code&gt;&lt;/a&gt;. The method &lt;a href=\&quot;myphysicslab.lab.model.CollisionAdvance.html#setDebugLevel\&quot;&gt;&lt;code&gt;#setDebugLevel&lt;/code&gt;&lt;/a&gt; selects a pre-defined group of\nWayPoints.&lt;/p&gt;\n&lt;p&gt;See &lt;a href=\&quot;Engine2D.html#observingthecollisionhandlingprocess\&quot;&gt;Observing The Collision Handling Process&lt;/a&gt;\nin 2D Physics Engine Overview, and &lt;code&gt;CollisionAdvance.DebugLevel&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],null,null,[null,null,null,null,null,1],null,null,[],[]],[],1,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionSim.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the CollisionSim to advance in time&lt;/p&gt;\n&quot;]]]],[&quot;opt_diffEqSolver&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;myphysicslab.lab.model.DiffEqSolver&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.DiffEqSolver.html&quot;]],null,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;the DiffEqSolver to use, default is\nRungeKutta&lt;/p&gt;\n&quot;]]]]],null,[]],[[[&quot;addWayPoints&quot;,[null,228,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Adds a group of WayPoints to show debug messages to the existing set of WayPoints.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;wayPoints&quot;,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;WayPoint&quot;,&quot;myphysicslab.lab.model.CollisionAdvance.WayPoint&quot;,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.WayPoint.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;array\nof WayPoints to add&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;advance&quot;,[null,233,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Advances the Simulation state by the specified amount of time.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.model.AdvanceStrategy&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.AdvanceStrategy.html#advance&quot;]],null,[]]],[]],[],null,[[&quot;timeStep&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the amount of time to advance in seconds&lt;/p&gt;\n&quot;]]]],[&quot;opt_memoList&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;myphysicslab.lab.util.MemoList&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.MemoList.html&quot;]],null,[]]],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;optional MemoList to call\nwhenever the simulation state is advanced&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;getCollisionTotals&quot;,[null,699,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns the CollisionTotals object giving collision statistics.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;myphysicslab.lab.model.CollisionTotals&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionTotals.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the CollisionTotals object giving\ncollision statistics.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getDiffEqSolver&quot;,[null,704,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns the DiffEqSolver used to solve the differential equations&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.model.ODEAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.ODEAdvance.html#getDiffEqSolver&quot;]],null,[]]],[]],[],null,[],[null,[null,null,null,[&quot;myphysicslab.lab.model.DiffEqSolver&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.DiffEqSolver.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the DiffEqSolver used to solve the differential equations&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getJointSmallImpacts&quot;,[null,711,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Whether to apply small impacts to joints to keep them aligned.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;&lt;code&gt;true&lt;/code&gt; means apply small impacts to joints&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getTime&quot;,[null,716,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns the current simulation time.  There are no explicit units for the time, so\nyou can regard a time unit as seconds or years as desired. See\n&lt;a href=\&quot;Architecture.html#aboutunitsofmeasurement\&quot;&gt;About Units Of Measurement&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.model.AdvanceStrategy&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.AdvanceStrategy.html#getTime&quot;]],null,[]]],[]],[],null,[],[null,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the current simulation time.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getTimeStep&quot;,[null,721,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns the default time step, the small increment of time by which\nto advance the simulation&amp;#39;s state.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.model.AdvanceStrategy&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.AdvanceStrategy.html#getTimeStep&quot;]],null,[]]],[]],[],null,[],[null,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the default time step, in seconds.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getWayPoints&quot;,[null,729,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns the group of WayPoints to show debug messages at.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;WayPoint&quot;,&quot;myphysicslab.lab.model.CollisionAdvance.WayPoint&quot;,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.WayPoint.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;the group of\nWayPoints to show debug messages at.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;reset&quot;,[null,1097,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Sets the simulation back to its initial conditions, and sets the simulation time\nto the starting time.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.model.AdvanceStrategy&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.AdvanceStrategy.html#reset&quot;]],null,[]]],[]],[],null,[],null,[]],[[&quot;setDebugLevel&quot;,[null,1108,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Sets how much debugging information to show,\nsee &lt;code&gt;CollisionAdvance.DebugLevel&lt;/code&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;debugLevel&quot;,[null,null,null,[&quot;DebugLevel&quot;,&quot;myphysicslab.lab.model.CollisionAdvance.DebugLevel&quot;,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.DebugLevel.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;specifies the\ngroups of debug messages to show&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;setDebugPaint&quot;,[null,1220,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;For debugging, specify a function that will paint canvases, so that you can see the\nsimulation state while stepping thru with debugger.&lt;/p&gt;\n&lt;h3&gt;Why to use setDebugPaint()&lt;/h3&gt;\n&lt;p&gt;Using &lt;code&gt;setDebugPaint()&lt;/code&gt; allows you to see the sub-steps involved in calculating the next\nsimulation state, such as each collision happening over a time step, or the sub-steps\ncalculated by a &lt;a href=\&quot;myphysicslab.lab.model.DiffEqSolver.html\&quot;&gt;&lt;code&gt;DiffEqSolver&lt;/code&gt;&lt;/a&gt;. Normally you only see the\nresult after the next state is calculated, because the frame is painted after the\nsimulation has advanced by a certain time step. By setting the &lt;code&gt;paintAll&lt;/code&gt; function and\nsetting a debugger break point you will be able to see the situation whenever\n&lt;code&gt;moveObjects()&lt;/code&gt; is called.  See &lt;code&gt;myphysicslab.lab.engine2D.RigidBodySim&lt;/code&gt; for\nan example and more information.&lt;/p&gt;\n&lt;p&gt;Here is example code where &lt;code&gt;simRun.paintAll&lt;/code&gt; is the SimRunner method\n&lt;code&gt;myphysicslab.lab.app.SimRunner#paintAll&lt;/code&gt; which paints all the LabCanvas&amp;#39;s.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;advance.setDebugPaint(goog.bind(simRun.paintAll, simRun));\n&lt;/code&gt;&lt;/pre&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;fn&quot;,[null,null,null,null,null,[[[null,null,[null,null,[],[null,null,null,null,null,null,null,null,1]]],[null,null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;function that will paint canvases&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;setDiffEqSolver&quot;,[null,1232,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Sets the DiffEqSolver used to solve the differential equations&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.model.ODEAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.ODEAdvance.html#setDiffEqSolver&quot;]],null,[]]],[]],[],null,[[&quot;diffEqSolver&quot;,[null,null,null,[&quot;myphysicslab.lab.model.DiffEqSolver&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.DiffEqSolver.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the DiffEqSolver used to solve the differential\nequations of this simulation.&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;setJointSmallImpacts&quot;,[null,1239,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Sets whether to apply small impacts to joints to keep them aligned.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;value&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;&lt;code&gt;true&lt;/code&gt; means apply small impacts to joints&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;setTimeStep&quot;,[null,1244,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Sets the default time step, the small increment of time by which to\nadvance the simulation&amp;#39;s state.&lt;/p&gt;\n&lt;p&gt;The reason for storing the time step in AdvanceStrategy is so that\n&lt;code&gt;myphysicslab.test.TestViewerApp&lt;/code&gt; produces same results as running a test.\nThis is a convenient way for a test to make known the time step to use.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.model.AdvanceStrategy&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.AdvanceStrategy.html#setTimeStep&quot;]],null,[]]],[]],[],null,[[&quot;timeStep&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;the default time step, in seconds.&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;setWayPoints&quot;,[null,1252,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Specifies the group of WayPoints to show debug messages at.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;wayPoints&quot;,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;WayPoint&quot;,&quot;myphysicslab.lab.model.CollisionAdvance.WayPoint&quot;,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.WayPoint.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;array\nof WayPoints to show debug messages for&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;toString&quot;,[null,211,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]]],[]],[[&quot;toStringShort&quot;,[null,219,null,[null,null,&quot;source/src/lab/model/CollisionAdvance.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns a minimal string representation of this object, usually giving just identity\ninformation like the class name and name of the object.&lt;/p&gt;\n&lt;p&gt;For an object whose main purpose is to represent another Printable object, it is\nrecommended to include the result of calling &lt;code&gt;toStringShort&lt;/code&gt; on that other object. For\nexample, calling &lt;code&gt;toStringShort()&lt;/code&gt; on a DisplayShape might return something like\nthis:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;DisplayShape{polygon:Polygon{&amp;#39;chain3&amp;#39;}}\n&lt;/code&gt;&lt;/pre&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.util.Printable&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.Printable.html#toStringShort&quot;]],null,[]]],[]],[],null,[],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;a minimal string representation of this object.&lt;/p&gt;\n&quot;]]]],[]]],[],null,[],[[&quot;myphysicslab.lab.model.AdvanceStrategy&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.AdvanceStrategy.html&quot;]],null,[]],[&quot;myphysicslab.lab.model.ODEAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.ODEAdvance.html&quot;]],null,[]],[&quot;myphysicslab.lab.util.Printable&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.Printable.html&quot;]],null,[]]],[],[[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]],null,1],null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;,&quot;myphysicslab.lab.model.CollisionAdvance&quot;,[],[],[],[]]]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="dossier.js" defer></script>