<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>myphysicslab.lab.app.SimController</title><link href="dossier.css" rel="stylesheet" type="text/css"><script src="types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,[[[&quot;myphysicslab.lab.app.SimController&quot;,null,null,null,[null,150,null,[null,null,&quot;source/src/lab/app/SimController.js.src.html&quot;]],null,[[[null,&quot;&lt;p&gt;Handles mouse and keyboard events occurring in a LabCanvas; either forwards events\nto an &lt;a href=\&quot;myphysicslab.lab.app.EventHandler.html\&quot;&gt;&lt;code&gt;EventHandler&lt;/code&gt;&lt;/a&gt;, or does LabView panning\n(moving the content of the LabView with the mouse).&lt;/p&gt;\n&lt;h2&gt;Key Events&lt;/h2&gt;\n&lt;p&gt;Key events are forwarded to the EventHandler, but only when the event target is the\nLabCanvas, or when there is no specific target (&lt;code&gt;document.body&lt;/code&gt; is the event target in\nthat case). This avoids forwarding key events intended for some other target, for\nexample a text edit area.&lt;/p&gt;\n&lt;h2&gt;Mouse Events&lt;/h2&gt;\n&lt;p&gt;If LabView panning is in effect, then mouse events are sent to the ViewPanner that was\ncreated. Otherwise, SimController calls &lt;a href=\&quot;myphysicslab.lab.app.MouseTracker.html#module$exports$myphysicslab$lab$app$MouseTracker.findNearestDragable\&quot;&gt;&lt;code&gt;MouseTracker#findNearestDragable&lt;/code&gt;&lt;/a&gt; which\nreturns a &lt;a href=\&quot;myphysicslab.lab.app.MouseTracker.html\&quot;&gt;&lt;code&gt;MouseTracker&lt;/code&gt;&lt;/a&gt; instance that processes the mouse events before\n(possibly) sending them to the EventHandler.&lt;/p&gt;\n&lt;p&gt;The MouseTracker forwards the mouse events to the EventHandler along with information\nsuch as: the mouse position in simulation coordinates of the LabView; the nearest\ndragable DisplayObject; the initial offset between the mouse and the DisplayObject.&lt;/p&gt;\n&lt;p&gt;Even if no dragable DisplayObject is found (and LabView panning is not occurring)\nthe MouseTracker still forwards the event to the EventHandler. The mouse position is\ngiven in simulation coordinates of the focus LabView of the LabCanvas.&lt;/p&gt;\n&lt;h2&gt;Touch Events&lt;/h2&gt;\n&lt;p&gt;Single touch events are handled like mouse events. Multiple touch events like &lt;em&gt;pinch to\nzoom&lt;/em&gt; or &lt;em&gt;two finger pan&lt;/em&gt; are ignored and left for the operating system to respond to.&lt;/p&gt;\n&lt;p&gt;Because people are inexact about putting all their fingers on the screen at the same\nexact moment, most multiple touch events start as a single touch, followed quickly by a\nmultiple touch event. The typical sequence is:&lt;/p&gt;\n&lt;ol&gt;&lt;li&gt;\n&lt;p&gt;A single-touch &lt;code&gt;touchStart&lt;/code&gt; comes thru, and we start dragging an object. We also\nallow the event to also be processed by the operating system (otherwise many\nmulti-touch events are not processed by the system).&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;A single-touch &lt;code&gt;touchMove&lt;/code&gt; event or two occurs, which causes some mouse dragging to\nhappen.&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;A multi-touch &lt;code&gt;touchStart&lt;/code&gt; event occurs, we stop mouse dragging. The multi-touch\n&lt;code&gt;touchStart&lt;/code&gt; is then handled by the operating system.&lt;/p&gt;\n&lt;/li&gt;&lt;/ol&gt;\n&lt;p&gt;Note that allowing the first &lt;code&gt;touchStart&lt;/code&gt; to be processed by the system results in the\ncanvas being highlighted (on iOS, probably others). To prevent that highlighting you\ncan add this bit of CSS code:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;canvas {\n    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;There are other such CSS options for other browsers.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;labviewpanning\&quot;&gt;&lt;/a&gt;\nLabView Panning&lt;/h2&gt;\n&lt;p&gt;When specified modifier keys are pressed (such as option key) then mouse drag events\nwill directly pan the focus LabView instead of sending events to the EventHandler. An\ninstance of &lt;a href=\&quot;myphysicslab.lab.app.ViewPanner.html\&quot;&gt;&lt;code&gt;ViewPanner&lt;/code&gt;&lt;/a&gt; is created to handle the LabView panning. Panning is\naccomplished by modifying the simulation rectangle of the LabView with\n&lt;a href=\&quot;myphysicslab.lab.view.LabView.html#setSimRect\&quot;&gt;&lt;code&gt;LabView#setSimRect&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;If LabView panning is enabled, it only occurs when the specified combination of\nmodifier keys are down during the mouse event, given in the &lt;code&gt;panModifier&lt;/code&gt; parameter.\nHere is an example where LabView panning happens when no modifier keys are pressed:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;new SimController(graphCanvas, null, {alt:false, control:false, meta:false, shift:false})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Here is an example where LabView panning happens when both the meta and alt keys are down:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;new SimController(labCanvas, eventHandler, {alt:true, control:false, meta:true, shift:false})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that the exact combination of modifier keys must be pressed to enable LabView\npanning. For example, if only the alt key is specified, then LabView panning will not\noccur if any other modifier is also pressed.&lt;/p&gt;\n&lt;p&gt;The table below shows how modifier keys are named on different operating systems.&lt;/p&gt;\n&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=\&quot;left\&quot;&gt;&lt;/th&gt;&lt;th align=\&quot;left\&quot;&gt;Mac OS&lt;/th&gt;&lt;th align=\&quot;left\&quot;&gt;Windows&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=\&quot;left\&quot;&gt;alt&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;option&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;alt&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=\&quot;left\&quot;&gt;meta&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;command&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;windows&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;\n&quot;]]],[null,null,null,null,null,1],null,[[[&quot;modifierKey&quot;,[null,620,null,[null,null,&quot;source/src/lab/app/SimController.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Specifies a set of modifier keys that can occur during browser events.&lt;/p&gt;\n&lt;p&gt;The table below shows how modifier keys are named on different operating systems.&lt;/p&gt;\n&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=\&quot;left\&quot;&gt;&lt;/th&gt;&lt;th align=\&quot;left\&quot;&gt;Mac OS&lt;/th&gt;&lt;th align=\&quot;left\&quot;&gt;Windows&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=\&quot;left\&quot;&gt;alt&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;option&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;alt&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=\&quot;left\&quot;&gt;meta&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;command&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;windows&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;\n&quot;]]],null,null,null,null,null,[],[]],[null,null,null,null,[[[&quot;alt&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[&quot;control&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[&quot;meta&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[&quot;shift&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]]]]]]],null,[],[],[[&quot;SimController&quot;,[null,150,null,[null,null,&quot;source/src/lab/app/SimController.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Handles mouse and keyboard events occurring in a LabCanvas; either forwards events\nto an &lt;a href=\&quot;myphysicslab.lab.app.EventHandler.html\&quot;&gt;&lt;code&gt;EventHandler&lt;/code&gt;&lt;/a&gt;, or does LabView panning\n(moving the content of the LabView with the mouse).&lt;/p&gt;\n&lt;h2&gt;Key Events&lt;/h2&gt;\n&lt;p&gt;Key events are forwarded to the EventHandler, but only when the event target is the\nLabCanvas, or when there is no specific target (&lt;code&gt;document.body&lt;/code&gt; is the event target in\nthat case). This avoids forwarding key events intended for some other target, for\nexample a text edit area.&lt;/p&gt;\n&lt;h2&gt;Mouse Events&lt;/h2&gt;\n&lt;p&gt;If LabView panning is in effect, then mouse events are sent to the ViewPanner that was\ncreated. Otherwise, SimController calls &lt;a href=\&quot;myphysicslab.lab.app.MouseTracker.html#module$exports$myphysicslab$lab$app$MouseTracker.findNearestDragable\&quot;&gt;&lt;code&gt;MouseTracker#findNearestDragable&lt;/code&gt;&lt;/a&gt; which\nreturns a &lt;a href=\&quot;myphysicslab.lab.app.MouseTracker.html\&quot;&gt;&lt;code&gt;MouseTracker&lt;/code&gt;&lt;/a&gt; instance that processes the mouse events before\n(possibly) sending them to the EventHandler.&lt;/p&gt;\n&lt;p&gt;The MouseTracker forwards the mouse events to the EventHandler along with information\nsuch as: the mouse position in simulation coordinates of the LabView; the nearest\ndragable DisplayObject; the initial offset between the mouse and the DisplayObject.&lt;/p&gt;\n&lt;p&gt;Even if no dragable DisplayObject is found (and LabView panning is not occurring)\nthe MouseTracker still forwards the event to the EventHandler. The mouse position is\ngiven in simulation coordinates of the focus LabView of the LabCanvas.&lt;/p&gt;\n&lt;h2&gt;Touch Events&lt;/h2&gt;\n&lt;p&gt;Single touch events are handled like mouse events. Multiple touch events like &lt;em&gt;pinch to\nzoom&lt;/em&gt; or &lt;em&gt;two finger pan&lt;/em&gt; are ignored and left for the operating system to respond to.&lt;/p&gt;\n&lt;p&gt;Because people are inexact about putting all their fingers on the screen at the same\nexact moment, most multiple touch events start as a single touch, followed quickly by a\nmultiple touch event. The typical sequence is:&lt;/p&gt;\n&lt;ol&gt;&lt;li&gt;\n&lt;p&gt;A single-touch &lt;code&gt;touchStart&lt;/code&gt; comes thru, and we start dragging an object. We also\nallow the event to also be processed by the operating system (otherwise many\nmulti-touch events are not processed by the system).&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;A single-touch &lt;code&gt;touchMove&lt;/code&gt; event or two occurs, which causes some mouse dragging to\nhappen.&lt;/p&gt;\n&lt;/li&gt;&lt;li&gt;\n&lt;p&gt;A multi-touch &lt;code&gt;touchStart&lt;/code&gt; event occurs, we stop mouse dragging. The multi-touch\n&lt;code&gt;touchStart&lt;/code&gt; is then handled by the operating system.&lt;/p&gt;\n&lt;/li&gt;&lt;/ol&gt;\n&lt;p&gt;Note that allowing the first &lt;code&gt;touchStart&lt;/code&gt; to be processed by the system results in the\ncanvas being highlighted (on iOS, probably others). To prevent that highlighting you\ncan add this bit of CSS code:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;canvas {\n    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;There are other such CSS options for other browsers.&lt;/p&gt;\n&lt;h2&gt;&lt;a id=\&quot;labviewpanning\&quot;&gt;&lt;/a&gt;\nLabView Panning&lt;/h2&gt;\n&lt;p&gt;When specified modifier keys are pressed (such as option key) then mouse drag events\nwill directly pan the focus LabView instead of sending events to the EventHandler. An\ninstance of &lt;a href=\&quot;myphysicslab.lab.app.ViewPanner.html\&quot;&gt;&lt;code&gt;ViewPanner&lt;/code&gt;&lt;/a&gt; is created to handle the LabView panning. Panning is\naccomplished by modifying the simulation rectangle of the LabView with\n&lt;a href=\&quot;myphysicslab.lab.view.LabView.html#setSimRect\&quot;&gt;&lt;code&gt;LabView#setSimRect&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;If LabView panning is enabled, it only occurs when the specified combination of\nmodifier keys are down during the mouse event, given in the &lt;code&gt;panModifier&lt;/code&gt; parameter.\nHere is an example where LabView panning happens when no modifier keys are pressed:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;new SimController(graphCanvas, null, {alt:false, control:false, meta:false, shift:false})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Here is an example where LabView panning happens when both the meta and alt keys are down:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;new SimController(labCanvas, eventHandler, {alt:true, control:false, meta:true, shift:false})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that the exact combination of modifier keys must be pressed to enable LabView\npanning. For example, if only the alt key is specified, then LabView panning will not\noccur if any other modifier is also pressed.&lt;/p&gt;\n&lt;p&gt;The table below shows how modifier keys are named on different operating systems.&lt;/p&gt;\n&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=\&quot;left\&quot;&gt;&lt;/th&gt;&lt;th align=\&quot;left\&quot;&gt;Mac OS&lt;/th&gt;&lt;th align=\&quot;left\&quot;&gt;Windows&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=\&quot;left\&quot;&gt;alt&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;option&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;alt&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=\&quot;left\&quot;&gt;meta&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;command&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;windows&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;\n&quot;]]],null,null,[null,null,null,null,null,1],null,null,[],[]],[],1,[[&quot;labCanvas&quot;,[null,null,null,[&quot;myphysicslab.lab.view.LabCanvas&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.view.LabCanvas.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the LabCanvas to process events\nfor.&lt;/p&gt;\n&quot;]]]],[&quot;eventHandler&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;myphysicslab.lab.app.EventHandler&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.app.EventHandler.html&quot;]],null,[]]],[null,null,null,null,null,null,null,null,null,1],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;the EventHandler\nto forward events to; or &lt;code&gt;null&lt;/code&gt; or &lt;code&gt;undefined&lt;/code&gt; to just do LabView panning.&lt;/p&gt;\n&quot;]]]],[&quot;panModifier&quot;,[1,null,null,null,null,[[[null,null,null,null,[[[&quot;alt&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[&quot;control&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[&quot;meta&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[&quot;shift&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]]]]],[null,null,null,null,null,null,null,null,null,1],[null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;which modifier\nkeys are needed for LabView panning; if &lt;code&gt;null&lt;/code&gt;, then LabView panning will not be\ndone; if &lt;code&gt;undefined&lt;/code&gt; then default is to do LabView panning when alt key is pressed.\nSee &lt;code&gt;SimController#modifierKey&lt;/code&gt;.&lt;/p&gt;\n&quot;]]]]],null,[]],[[[&quot;destroy&quot;,[null,306,null,[null,null,&quot;source/src/lab/app/SimController.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Remove connections to other objects to facilitate garbage collection.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;notifyError&quot;,[null,294,null,[null,null,&quot;source/src/lab/app/SimController.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;This method is called when an error occurs.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.util.ErrorObserver&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.ErrorObserver.html#notifyError&quot;]],null,[]]],[]],[],null,[[&quot;error&quot;,[null,null,null,null,null,null,1],[[[null,&quot;&lt;p&gt;the error that caused the exception&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;toString&quot;,[null,275,null,[null,null,&quot;source/src/lab/app/SimController.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]]],[]],[[&quot;toStringShort&quot;,[null,287,null,[null,null,&quot;source/src/lab/app/SimController.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns a minimal string representation of this object, usually giving just identity\ninformation like the class name and name of the object.&lt;/p&gt;\n&lt;p&gt;For an object whose main purpose is to represent another Printable object, it is\nrecommended to include the result of calling &lt;code&gt;toStringShort&lt;/code&gt; on that other object. For\nexample, calling &lt;code&gt;toStringShort()&lt;/code&gt; on a DisplayShape might return something like\nthis:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;DisplayShape{polygon:Polygon{&amp;#39;chain3&amp;#39;}}\n&lt;/code&gt;&lt;/pre&gt;\n&quot;]]],null,null,null,null,null,[[&quot;myphysicslab.lab.util.Printable&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.Printable.html#toStringShort&quot;]],null,[]]],[]],[],null,[],[null,[null,null,null,[&quot;string&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;a minimal string representation of this object.&lt;/p&gt;\n&quot;]]]],[]]],[],null,[],[[&quot;myphysicslab.lab.util.ErrorObserver&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.ErrorObserver.html&quot;]],null,[]],[&quot;myphysicslab.lab.util.Printable&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.util.Printable.html&quot;]],null,[]]],[],[[&quot;myphysicslab.lab.app.SimController&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.app.SimController.html&quot;]],null,[]],null,1],null,&quot;myphysicslab.lab.app.SimController.html&quot;,&quot;myphysicslab.lab.app.SimController&quot;,[],[],[],[]]]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="dossier.js" defer></script>