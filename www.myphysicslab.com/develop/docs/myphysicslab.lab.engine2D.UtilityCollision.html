<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>myphysicslab.lab.engine2D.UtilityCollision</title><link href="dossier.css" rel="stylesheet" type="text/css"><script src="types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,[[[&quot;myphysicslab.lab.engine2D.UtilityCollision&quot;,null,null,null,[null,33,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],null,[[[null,&quot;&lt;p&gt;Provides utility methods for calculating collision information.&lt;/p&gt;\n&quot;]]],[null,null,null,null,null,1],null,[],null,[[[&quot;addCollision&quot;,[null,85,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Adds the given collision only if it there is not already a deeper collision\nbetween the same bodies and same edges very close by. This helps prevent having\nduplicate collisions (or contacts), which helps the process of solving for contact\nforces or collision impulses with ComputeForces.&lt;/p&gt;\n&lt;p&gt;When a vertex collides into an edge, we need to see if there is a more accurate\nedge/edge collision to be used instead of the vertex/edge collision. For endpoint\nVertexes, this involves testing both edges on either side of the vertex.&lt;/p&gt;\n&lt;p&gt;One way to look at this addCollision function is that you are defining an equality\ntest between collisions, along with an ordering. A pair of collisions have to be\napproximately equal, and then we take the better of the two. If this were transitive,\nthen you needn&amp;#39;t worry about the case of 3 nearly equal collisions. Because you add\ncollisions one at a time, you would always have only one of the 3 in the list at any\ntime.&lt;/p&gt;\n&lt;p&gt;But collisions aren&amp;#39;t really transitive because of the nearness criteria. Suppose\nthere are 3 collisions, A, B, and C. A is near B, and B is near C. But A is not be\n&amp;#39;near&amp;#39; C. As an example, suppose there are two &amp;#39;decorated&amp;#39; midpoint Vertexes, A and C,\non a curved edge. Suppose the distance between A and C is 0.11 and the nearness\ncriteria is 0.1. So they are considered not near and both are added to the list. Now\nwe add B, the edge/edge collision between A and C. It is near both A and C. To ensure\nthat both A and C are removed, we need to go thru the entire list, allowing B to kick\nout every collision it is near to.&lt;/p&gt;\n&lt;p&gt;Even if the collision we are adding is rejected, we should still go thru the\nentire list. In the above example, again suppose that A and C are on the list but not\nnear each other. But this time, A is the deepest collision, followed by B, with C\nbeing the shallowest. So &lt;code&gt;A &amp;gt; B &amp;gt; C&lt;/code&gt; (where &amp;gt; means &amp;#39;deeper&amp;#39;). We try to add B, but\nbecause &lt;code&gt;A &amp;gt; B&lt;/code&gt;, we reject B. If we stop there, then C will still be on the list. If we\ncontinue, we find that &lt;code&gt;B &amp;gt; C&lt;/code&gt; and also reject C. If we don&amp;#39;t go thru the entire list\nthis way, then the ordering of the list determines the final result: in one ordering\nof the list, C survives in another ordering it is rejected.&lt;/p&gt;\n&lt;p&gt;Therefore, we always go thru the entire list, even when the collision we are\nconsidering has been shown to be shallower than a nearby collision. (Although this is\nprobably very rare, and not devastating if it slipped through).&lt;/p&gt;\n&lt;p&gt;Joints are a special case, they should always be added, never removed.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[],null,[[&quot;collisions&quot;,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;myphysicslab.lab.engine2D.RigidBodyCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.RigidBodyCollision.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;the list of\ncollisions, to search and possibly add to&lt;/p&gt;\n&quot;]]]],[&quot;c2&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.RigidBodyCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.RigidBodyCollision.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the RigidBodyCollision to\npossibly add to the list&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;true if the collision was added&lt;/p&gt;\n&quot;]]]],[]],[[&quot;checkVertexes&quot;,[null,164,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Checks for collision of each vertex of body2 with edges of body1.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[],null,[[&quot;collisions&quot;,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;myphysicslab.lab.engine2D.RigidBodyCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.RigidBodyCollision.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;the list of\ncollisions to add to&lt;/p&gt;\n&quot;]]]],[&quot;body1&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.Polygon&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.Polygon.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the Polygon whose edges are checked&lt;/p&gt;\n&quot;]]]],[&quot;body2&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.Polygon&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.Polygon.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the Polygon whose Vertexes are checked&lt;/p&gt;\n&quot;]]]],[&quot;time&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;current simulation time&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;intersectionPossible&quot;,[null,252,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Performs a rough proximity test: are the bodies close enough that their proximity\ncircles overlap? Returns &lt;code&gt;false&lt;/code&gt; when there can be no intersection between the two\nPolygon bounding rectangles. Returns &lt;code&gt;true&lt;/code&gt; when an intersection between the\ntwo bodies is possible.&lt;/p&gt;\n&lt;p&gt;Further checks are needed besides this rough check to determine if there really is\nintersection of the two bodies. The bounding rectangle can be increased in size by the\n&lt;code&gt;swellage&lt;/code&gt; amount.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[],null,[[&quot;body1&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.Polygon&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.Polygon.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the first body to check for\nintersection with&lt;/p&gt;\n&quot;]]]],[&quot;body2&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.Polygon&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.Polygon.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the second body to check for\nintersection with&lt;/p&gt;\n&quot;]]]],[&quot;swellage&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;amount to increase the bounding rectangle sizes&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;false if there can be no intersection between the two bodies.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;intersectionPossibleSpecial&quot;,[null,277,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;special edge proximity test:  look at only the component of the\ndistance that is normal to the edge.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[],null,[[&quot;poly1&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.Polygon&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.Polygon.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the first body to check for\nintersection with&lt;/p&gt;\n&quot;]]]],[&quot;poly2&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.Polygon&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.Polygon.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the second body to check for\nintersection with&lt;/p&gt;\n&quot;]]]],[&quot;swellage&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;amount to increase the bounding rectangle sizes&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;false if there can be no intersection between the two bodies.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;printCollisionStatistics&quot;,[null,340,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Prints statistics about number of collisions and contacts of various types that\noccurred.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;subsetCollisions1&quot;,[null,371,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Returns a subset of collisions such that all the collisions in the set are are\nconnected. Two collisions are connected when they have a common moveable (finite mass)\nbody. The subset will be such that you can go from one collision to any other\ncollision via neighboring connected collisions.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[],null,[[&quot;superset&quot;,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;myphysicslab.lab.engine2D.RigidBodyCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.RigidBodyCollision.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;the set of\ncollisions to examine&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;myphysicslab.lab.engine2D.RigidBodyCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.RigidBodyCollision.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;a subset of collisions\nsuch that all the collisions in the set are connected by moveable bodies&lt;/p&gt;\n&quot;]]]],[]],[[&quot;subsetCollisions2&quot;,[null,449,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Given a set of collisions and a starting collision in that set, returns the subset\nof collisions that are connected by joints to the moveable bodies in the starting\ncollision. The subset will be such that you can go from one collision to any other\ncollision via neighboring connected collisions.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[],null,[[&quot;superset&quot;,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;myphysicslab.lab.engine2D.RigidBodyCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.RigidBodyCollision.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;the set of\ncollisions to examine&lt;/p&gt;\n&quot;]]]],[&quot;startC&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.RigidBodyCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.RigidBodyCollision.html&quot;]],null,[]]],[[[null,&quot;&lt;p&gt;the starting collision\nin the superset&lt;/p&gt;\n&quot;]]]],[&quot;hybrid&quot;,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;include collisions involving either body in startC&lt;/p&gt;\n&quot;]]]],[&quot;v&quot;,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;number&quot;,null,null,1,[]]]]]],[[[null,&quot;&lt;p&gt;array of velocity of each collision&lt;/p&gt;\n&quot;]]]],[&quot;minVelocity&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;for hybrid collision handling, only include collisions\nthat have more negative velocity than this minimum.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;Array&quot;,null,null,1,[[null,null,null,[&quot;myphysicslab.lab.engine2D.RigidBodyCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.RigidBodyCollision.html&quot;]],null,[]]]]]],[[[null,&quot;&lt;p&gt;a subset of collisions\nsuch that all the collisions in the set are connected via joints to the moveable\nbodies of the starting collision.&lt;/p&gt;\n&quot;]]]],[]]],[[[&quot;DISABLE_EDGE_EDGE&quot;,[null,817,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;disables all edge/edge contacts and collisions.&lt;/p&gt;\n&quot;]]],null,null,[1],null,null,[],[],[null,null,null,1]],[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[[&quot;HIGHLIGHT_COLLISION_TESTING&quot;,[null,824,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;highlight edges and Vertexes being tested for collisions or contacts&lt;/p&gt;\n&quot;]]],null,null,[1],null,null,[],[],[null,null,null,1]],[null,null,null,[&quot;boolean&quot;,null,null,1,[]]]],[[&quot;edgeEdgeCollisionTests&quot;,[null,779,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;number of times that an edge-edge collision test occurred&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[null,null,null,[&quot;number&quot;,null,null,1,[]]]],[[&quot;specialNormalHits&quot;,[null,785,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Number of times that special normal was requested when it was already calculated.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[null,null,null,[&quot;number&quot;,null,null,1,[]]]],[[&quot;specialNormalMisses&quot;,[null,791,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Number of times that special normal was requested when it was not yet calculated.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[null,null,null,[&quot;number&quot;,null,null,1,[]]]],[[&quot;specialNormalRotate&quot;,[null,797,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Number of times the &lt;code&gt;specialNormal&lt;/code&gt; was rotated to world coords.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[null,null,null,[&quot;number&quot;,null,null,1,[]]]],[[&quot;vertexBodyCollisionTests&quot;,[null,803,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;number of times that &lt;code&gt;testCollisionVertex&lt;/code&gt; was called.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[],[null,null,null,1]],[null,null,null,[&quot;number&quot;,null,null,1,[]]]]],[[&quot;UtilityCollision&quot;,[null,33,null,[null,null,&quot;source/src/lab/engine2D/UtilityCollision.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Provides utility methods for calculating collision information.&lt;/p&gt;\n&quot;]]],null,null,[null,null,null,null,null,1],null,null,[],[],[null,null,1]],[],1,[],null,[]],[],[],null,[],[],[],[[&quot;myphysicslab.lab.engine2D.UtilityCollision&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.UtilityCollision.html&quot;]],null,[]],null,1],null,&quot;myphysicslab.lab.engine2D.UtilityCollision.html&quot;,&quot;myphysicslab.lab.engine2D.UtilityCollision&quot;,[],[],[],[]]]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="dossier.js" defer></script>