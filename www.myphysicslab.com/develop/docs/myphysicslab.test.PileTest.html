<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>myphysicslab.test.PileTest</title><link href="dossier.css" rel="stylesheet" type="text/css"><script src="types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main data-page-data="[null,[[[&quot;myphysicslab.test.PileTest&quot;,null,null,null,[null,38,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],null,[[[null,&quot;&lt;p&gt;Tests involving piles of many objects with engine2D physics engine.&lt;/p&gt;\n&quot;]]],[null,null,null,null,null,1],null,[],null,[[[&quot;additive_pile_circle_test&quot;,[null,798,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Adds same sized round balls to a pile until performance degrades\nto the point that the sim is barely keeping up with real time&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;expectedBlocks&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]]]],null,[]],[[&quot;additive_pile_square_test&quot;,[null,781,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Adds same sized square blocks to a pile until performance degrades\nto the point that the sim is barely keeping up with real time&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;expectedBlocks&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]]]],null,[]],[[&quot;connected_blocks_pile_setup&quot;,[null,75,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Two blocks are rigidly connected by two double joints, so that\nthe blocks cannot move relative to each other, these fall with a few other blocks\ninto V shaped walls; the connected blocks rotate very quickly after colliding with\nthe wall.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.ContactSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.ContactSim.html&quot;]],null,[]]]],[&quot;advance&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]]]]],null,[]],[[&quot;connected_blocks_pile_test&quot;,[null,113,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Test that the joints on the connected blocks stay reasonably tight, despite rapid\nrotation.  Turns out that they do slip a bit from rapid rotation.  Because we check\nthat energy is constant after the pile settles down, it is important that there are no\nrocking blocks (because damping is non-zero, rocking results in loss of energy).&lt;/p&gt;\n&lt;p&gt;The problem is contact forces are not calculated well enough during rapid rotation;\ntaking smaller steps pretty much eliminates the problem.&lt;/p&gt;\n&lt;p&gt;To do: make a test showing that smaller steps results in tight joints.&lt;/p&gt;\n&lt;p&gt;History: Dec 2012 changed results due to the slight change in contact force\ncalculation; had to recalculate the results. Also changed the initial conditions\nslightly so that the result was not a situation where there was a rocking block which\nloses energy over time&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;near_stable_connected_blocks_pile_setup&quot;,[null,241,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Close to stable resting configuration of blocks derived from a particular run of\n&lt;a href=\&quot;myphysicslab.test.PileTest.html#module$exports$myphysicslab$test$PileTest.connected_blocks_pile_setup\&quot;&gt;&lt;code&gt;#connected_blocks_pile_setup&lt;/code&gt;&lt;/a&gt; (just moments before the pile settles down).&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.ContactSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.ContactSim.html&quot;]],null,[]]]],[&quot;advance&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]]]]],null,[]],[[&quot;near_stable_connected_blocks_pile_test&quot;,[null,324,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Test of close-to-stable resting configuration derived from a particular run of\n&lt;a href=\&quot;myphysicslab.test.PileTest.html#module$exports$myphysicslab$test$PileTest.connected_blocks_pile_setup\&quot;&gt;&lt;code&gt;#connected_blocks_pile_setup&lt;/code&gt;&lt;/a&gt; (just moments before the pile settles down).\nSo that we can compare running identical configuration across different browsers and\nchanges to myPhysicsLab software.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;h2&gt;TO DO&lt;/h2&gt;\nFigure out why FireFox and Safari have such large SMALL_IMPACTS (like as big as 0.01 or\n0.02) in this test. Chrome doesn&amp;#39;t have these. What&amp;#39;s different between them?\nPresumably the small-impacts are due to joint slippage.\nLooks like the small body 8 is getting kicked by those impulses and that is why it\nis still moving at the time of these test results.\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;pile_10_perf&quot;,[null,545,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Performance test that runs pile_10_random_blocks; this is a stress test for\ncontact force calculation.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;pile_10_random_blocks&quot;,[null,507,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Runs pile_10_random_blocks_setup.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;pile_10_random_blocks_setup&quot;,[null,479,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.ContactSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.ContactSim.html&quot;]],null,[]]]],[&quot;advance&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]]]]],null,[]],[[&quot;pile_20_perf&quot;,[null,682,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Performance test that runs pile_20_random_blocks; this is a stress test for\ncontact force calculation.&lt;/p&gt;\n&lt;p&gt;Note that the performance measurement is only valid for comparing different\nversions of code if the same results are found in each run.  Slight changes in\ncollision handling or other algorithms can completely change the resulting positions\nof the blocks.  This can result in different runs having different numbers of\ncontacts which is the factor that most affects performance because the number\nof contacts determines the size of the matrix that is solve for finding\ncontact forces, and this is currently an O(n^3) process.&lt;/p&gt;\n&lt;p&gt;Java vs. Javascript:  The test results (and setup) are different than in the Java\nversion for a couple of reasons.  1) because Java and Javascript give slightly different\nresults from Math.cos (see DoubleMath_test.js) and because this test is so sensitive\nwith all the collisions, there is no way to match the Java results.  2) The setup was\nchanged so that the blocks are not moving after 7 or 8 seconds.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;pile_20_random_blocks&quot;,[null,640,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Runs pile_20_random_blocks_setup.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;pile_20_random_blocks_setup&quot;,[null,612,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.ContactSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.ContactSim.html&quot;]],null,[]]]],[&quot;advance&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]]]]],null,[]],[[&quot;pile_config_1_setup&quot;,[null,375,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;This configuration caused a &amp;#39;checkNoneCollide&amp;#39; exception in versions prior to\nMay 12, 2016. Originally found in PileApp after clicking the &amp;#39;random&amp;#39; button once.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.ContactSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.ContactSim.html&quot;]],null,[]]]],[&quot;advance&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]]]]],null,[]],[[&quot;pile_config_1_test&quot;,[null,456,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Test of configuration that caused a &amp;#39;checkNoneCollide&amp;#39; exception in versions prior\nto May 12, 2016.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;pile_uniform_balls_setup&quot;,[null,586,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.ContactSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.ContactSim.html&quot;]],null,[]]]],[&quot;advance&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]]]]],null,[]],[[&quot;pile_uniform_blocks_setup&quot;,[null,599,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.ContactSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.ContactSim.html&quot;]],null,[]]]],[&quot;advance&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]]]]],null,[]],[[&quot;stable_connected_blocks_pile_setup&quot;,[null,137,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Stable resting configuration of blocks derived from a particular run of\n&lt;a href=\&quot;myphysicslab.test.PileTest.html#module$exports$myphysicslab$test$PileTest.connected_blocks_pile_setup\&quot;&gt;&lt;code&gt;#connected_blocks_pile_setup&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;sim&quot;,[null,null,null,[&quot;myphysicslab.lab.engine2D.ContactSim&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.engine2D.ContactSim.html&quot;]],null,[]]]],[&quot;advance&quot;,[null,null,null,[&quot;myphysicslab.lab.model.CollisionAdvance&quot;,null,[null,null,[null,null,&quot;myphysicslab.lab.model.CollisionAdvance.html&quot;]],null,[]]]]],null,[]],[[&quot;stable_connected_blocks_pile_test&quot;,[null,211,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Test of stable resting configuration derived from a particular run of\n&lt;a href=\&quot;myphysicslab.test.PileTest.html#module$exports$myphysicslab$test$PileTest.connected_blocks_pile_setup\&quot;&gt;&lt;code&gt;#connected_blocks_pile_setup&lt;/code&gt;&lt;/a&gt;. So that we can compare running identical\nconfiguration across different browsers and changes to myPhysicsLab software.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;test&quot;,[null,44,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;testPerformance&quot;,[null,52,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],null,[]]],[[[&quot;groupName&quot;,[null,817,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[]],null,null,[1],null,null,[],[]],[null,null,null,[&quot;string&quot;,null,null,1,[]]]]],[[&quot;PileTest&quot;,[null,38,null,[null,null,&quot;source/src/test/PileTest.js.src.html&quot;]],[[[null,&quot;&lt;p&gt;Tests involving piles of many objects with engine2D physics engine.&lt;/p&gt;\n&quot;]]],null,null,[null,null,null,null,null,1],null,null,[],[],[null,null,1]],[],1,[],null,[]],[],[],null,[],[],[],[[&quot;myphysicslab.test.PileTest&quot;,null,[null,null,[null,null,&quot;myphysicslab.test.PileTest.html&quot;]],null,[]],null,1],null,&quot;myphysicslab.test.PileTest.html&quot;,&quot;myphysicslab.test.PileTest&quot;,[],[],[],[]]]]]"></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="dossier.js" defer></script>